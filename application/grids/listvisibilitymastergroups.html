<!-- ISPC-2482 Lore 21.11.2019 -->

<gridrow>
	<phpscript>
		$count++;
		$client_specific_group = $view->client_specific_group;
		$edit = $view->translate('edit');
	 	$existing_permissions = $view->existing_permissions;
	 	$existing_secrecy_permissions = $view->existing_secrecy_permissions;
	 
				
		if(!empty($client_specific_group[$id]))
		{
			$client_groups = '( ' . implode(', ', $client_specific_group[$id]) . ')';
		}
		else
		{
			$client_groups = '';
		}
		
		$tr_client_groups = "";
		
		foreach($client_specific_group [$id] as $cl_gr_id => $cl_gr_name){
		
			if(in_array($cl_gr_id, $existing_permissions[$id]))
			{
				$checked = 'checked = "checked"';
			}
			else
			{
				$checked = '';
			}
			
			if(in_array($cl_gr_id, $existing_secrecy_permissions[$id]))
			{
				$sct_checked = 'checked = "checked"';
			}
			else
			{
				$sct_checked = '';
			}
		
		
		
			$tr_client_groups .= "<tr>";
			$tr_client_groups .= '<td></td>';
			$tr_client_groups .= '<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$cl_gr_name.'</td>';
			$tr_client_groups .= '<td><input type="checkbox" name="gdf['.$cl_gr_name.']['.$cl_gr_id.']" value="1" '.$checked.' />	</td>';
			$tr_client_groups .= '<td><input type="checkbox" name="sct['.$cl_gr_name.']['.$cl_gr_id.']" value="1" '.$sct_checked.' /></td>';
			$tr_client_groups .= "</tr>";
		}

	</phpscript>
	
	<tr id="listusergroup_grouptr[[count]]" class="row" >
		<td valign="top">[[count]]</td>
		<td valign="top" colspan="3"><b>[[groupname]] </b></td>
	</tr>
	[[tr_client_groups]]
</gridrow>

