<?php
// ISPC-2791 Lore 13.01.2021
/**
 * PatientExcretionInfo
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ISPC-2791
 * @subpackage Application (2021-01-13)
 * @author     Lore <office@originalware.com>
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class PatientExcretionInfo extends BasePatientExcretionInfo
{            

    public function getPatientExcretionInfo($ipid)
    {
        if (empty($ipid)) {
            return; //fail-safe
        }
        
        $loc = Doctrine_Query::create()
        ->select("*")
        ->from('PatientExcretionInfo')
        ->andWhere("ipid= ? ", $ipid);
        $disarr = $loc->fetchArray();
        
        return $disarr;
        
    }
      
    public static function getIndependence()
    {
        $Independence = array(
            '1' => "Selbstständig",
            '2' => "Mit Hilfestellung",
            '3' => "Komplette Übernahme",
            '4'=> 'Sonstiges',
        );
        
        return $Independence;
    }
    
    public static function getIncontinence()
    {
        $incontinence = array(
            '1' => "Nicht inkontinent",
            '2' => "Inkontinent tags",
            '3' => "Inkontinent nachts",
            '4'=> 'Sonstiges',
        );
        
        return $incontinence;
    }
    
    public static function getMenstruation()
    {
        $menstruation = array(
            '1' => "Noch nicht eingesetzt",
            '2' => "Eingesetzt, aktuell nein",
            '3' => "Eingesetzt, aktuell ja",
            '4'=> 'Sonstiges',
        );
        
        return $menstruation;
    }
    
    public function getExcretionInfo($ipid)
    {
        if (empty($ipid)) {
            return;
        }
        
        $pei = new PatientExcretionInfo();
        $pei_stm = $pei->getPatientExcretionInfo($ipid);
        //dd($pei_stm);
        if(!empty($pei_stm)){
            
            $ja_nein = array('1' => 'Nein', '2' => 'keine Angabe', '3' => 'Ja', '4' => 'Sonstiges');
            
            $pei_stm[0]['General'] = '<ul class="ExcretionInfo_pm">';
                if(!empty($pei_stm[0]['independence_opt'])){
                    $independence = PatientExcretionInfo::getIndependence();
                    $pei_stm[0]['independence'] = '<ul class="ExcretionInfo_pm">';
                    $independence_arr = explode(",", $pei_stm[0]['independence_opt']);
                    foreach($independence_arr as $km => $vm){
                        $pei_stm[0]['independence'] .= '<li>'.$independence[$vm];
                        if($vm == 4){
                            $pei_stm[0]['independence'] .= ' ('.$pei_stm[0]['independence_text'].')';
                        }
                        $pei_stm[0]['independence'] .= '</li>';
                    }
                    $pei_stm[0]['independence'] .= '</ul>';
                }
                
/*                 if(!empty($pei_stm[0]['independence_opt'])){
                    $independence_arr = explode(",", $pei_stm[0]['independence_opt']);
                    foreach($independence_arr as $km => $vm){
                        $pei_stm[0]['independence'] .= $ja_nein[$vm];
                        if($vm == 4){
                            $pei_stm[0]['independence'] .= ' ('.$pei_stm[0]['independence_text'].')';
                        }
                    }
                } */
                
                if(!empty($pei_stm[0]['incontinence_opt'])){
                    $incontinence = PatientExcretionInfo::getIncontinence();
                    $pei_stm[0]['incontinence'] = '<ul class="ExcretionInfo_pm">';
                    $incontinence_arr = explode(",", $pei_stm[0]['incontinence_opt']);
                    foreach($incontinence_arr as $km => $vm){
                        $pei_stm[0]['incontinence'] .= '<li>'.$incontinence[$vm];
                        if($vm == 4){
                            $pei_stm[0]['incontinence'] .= ' ('.$pei_stm[0]['incontinence_text'].')';
                        }
                        $pei_stm[0]['incontinence'] .= '</li>';
                    }
                    $pei_stm[0]['incontinence'] .= '</ul>';
                }
                if(!empty($pei_stm[0]['wears_diapers_opt'])){
                    $pei_stm[0]['wears_diapers'] = '<ul class="ExcretionInfo_pm">';
                    $wears_diapers_arr = explode(",", $pei_stm[0]['wears_diapers_opt']);
                    foreach($wears_diapers_arr as $km => $vm){
                        $pei_stm[0]['wears_diapers'] .= '<li>'.$ja_nein[$vm];
                        if($vm == 3){
                            $pei_stm[0]['wears_diapers'] .= ' ('.$pei_stm[0]['wears_diapers_text'].')';
                        }
                        $pei_stm[0]['wears_diapers'] .= '</li>';
                    }
                    $pei_stm[0]['wears_diapers'] .= '</ul>';
                }
                if(!empty($pei_stm[0]['toilet_training_opt'])){
                    $toilet_training = array('1' => 'Nein', '2' => 'Ja, tags', '3' => 'Ja, nachts', '4' => 'Sonstiges') ;
                    $pei_stm[0]['toilet_training'] = '<ul class="ExcretionInfo_pm">';
                    $toilet_training_arr = explode(",", $pei_stm[0]['toilet_training_opt']);
                    foreach($toilet_training_arr as $km => $vm){
                        $pei_stm[0]['toilet_training'] .= '<li>'.$toilet_training[$vm];
                        if($vm == 4){
                            $pei_stm[0]['toilet_training'] .= ' ('.$pei_stm[0]['toilet_training_text'].')';
                        }
                        $pei_stm[0]['toilet_training'] .= '</li>';
                    }
                    $pei_stm[0]['toilet_training'] .= '</ul>';
                }
                if(!empty($pei_stm[0]['toilet_chair_opt'])){
                    $pei_stm[0]['toilet_chair'] = '<ul class="ExcretionInfo_pm">';
                    $toilet_chair_arr = explode(",", $pei_stm[0]['toilet_chair_opt']);
                    foreach($toilet_chair_arr as $km => $vm){
                        $pei_stm[0]['toilet_chair'] .= '<li>'.$ja_nein[$vm].'</li>';
                    }
                    $pei_stm[0]['toilet_chair'] .= '</ul>';
                }
                if(!empty($pei_stm[0]['abdominal_massages_opt'])){
                    $pei_stm[0]['abdominal_massages'] = '<ul class="ExcretionInfo_pm">';
                    $abdominal_massages_arr = explode(",", $pei_stm[0]['abdominal_massages_opt']);
                    foreach($abdominal_massages_arr as $km => $vm){
                        $pei_stm[0]['abdominal_massages'] .= '<li>'.$ja_nein[$vm].'</li>';
                    }
                    $pei_stm[0]['abdominal_massages'] .= '</ul>';
                }
           $pei_stm[0]['General'] .= '</ul>';
            
           $pei_stm[0]['bowel_movement'] = '<ul class="ExcretionInfo_pm">';
                if(!empty($pei_stm[0]['stimulate_opt'])){
                    $pei_stm[0]['stimulate'] = '<ul class="ExcretionInfo_pm">';
                    $stimulate_arr = explode(",", $pei_stm[0]['stimulate_opt']);
                    foreach($stimulate_arr as $km => $vm){
                        $pei_stm[0]['stimulate'] .= '<li>'.$ja_nein[$vm].'</li>';
                    }
                    $pei_stm[0]['stimulate'] .= '</ul>';
                }
                if(!empty($pei_stm[0]['intestinal_tube_opt'])){
                    $pei_stm[0]['intestinal_tube'] = '<ul class="ExcretionInfo_pm">';
                    $intestinal_tube_arr = explode(",", $pei_stm[0]['intestinal_tube_opt']);
                    foreach($intestinal_tube_arr as $km => $vm){
                        $pei_stm[0]['intestinal_tube'] .= '<li>'.$ja_nein[$vm].'</li>';
                    }
                    $pei_stm[0]['intestinal_tube'] .= '</ul>';
                }
                if(!empty($pei_stm[0]['digital_clearing_opt'])){
                    $pei_stm[0]['digital_clearing'] = '<ul class="ExcretionInfo_pm">';
                    $digital_clearing_arr = explode(",", $pei_stm[0]['digital_clearing_opt']);
                    foreach($digital_clearing_arr as $km => $vm){
                        $pei_stm[0]['digital_clearing'] .= '<li>'.$ja_nein[$vm].'</li>';
                    }
                    $pei_stm[0]['digital_clearing'] .= '</ul>';
                }
            $pei_stm[0]['bowel_movement'] .= '</ul>';
            
            $pei_stm[0]['urninating'] = '<ul class="ExcretionInfo_pm">';
                if(!empty($pei_stm[0]['uses_templates_opt'])){
                    $pei_stm[0]['uses_templates'] = '<ul class="ExcretionInfo_pm">';
                    $uses_templates_arr = explode(",", $pei_stm[0]['uses_templates_opt']);
                    foreach($uses_templates_arr as $km => $vm){
                        $pei_stm[0]['uses_templates'] .= '<li>'.$ja_nein[$vm];
                        if($vm == 3){
                            $pei_stm[0]['uses_templates'] .= ' ('.$pei_stm[0]['uses_templates_text'].')';
                        }
                        $pei_stm[0]['uses_templates'] .= '</li>';
                    }
                    $pei_stm[0]['uses_templates'] .= '</ul>';
                }
                if(!empty($pei_stm[0]['urine_bottle_opt'])){
                    $pei_stm[0]['urine_bottle'] = '<ul class="ExcretionInfo_pm">';
                    $urine_bottle_arr = explode(",", $pei_stm[0]['urine_bottle_opt']);
                    foreach($urine_bottle_arr as $km => $vm){
                        $pei_stm[0]['urine_bottle'] .= '<li>'.$ja_nein[$vm];
                        if($vm == 3){
                            $pei_stm[0]['urine_bottle'] .= ' ('.$pei_stm[0]['urine_bottle_text'].')';
                        }
                        $pei_stm[0]['urine_bottle'] .= '</li>';
                    }
                    $pei_stm[0]['urine_bottle'] .= '</ul>';
                }
                if(!empty($pei_stm[0]['urine_condom_opt'])){
                    $pei_stm[0]['urine_condom'] = '<ul class="ExcretionInfo_pm">';
                    $urine_condom_arr = explode(",", $pei_stm[0]['urine_condom_opt']);
                    foreach($urine_condom_arr as $km => $vm){
                        $pei_stm[0]['urine_condom'] .= '<li>'.$ja_nein[$vm];
                        if($vm == 3){
                            $pei_stm[0]['urine_condom'] .= ' ('.$pei_stm[0]['urine_condom_text'].')';
                        }
                        $pei_stm[0]['urine_condom'] .= '</li>';
                    }
                    $pei_stm[0]['urine_condom'] .= '</ul>';
                }
                if(!empty($pei_stm[0]['catheterization_opt'])){
                    $pei_stm[0]['catheterization'] = '<ul class="ExcretionInfo_pm">';
                    $catheterization_arr = explode(",", $pei_stm[0]['catheterization_opt']);
                    foreach($catheterization_arr as $km => $vm){
                        $pei_stm[0]['catheterization'] .= '<li>'.$ja_nein[$vm];
                        if($vm == 3){
                            $pei_stm[0]['catheterization'] .= ' ('.$pei_stm[0]['catheterization_text'].')';
                        }
                        $pei_stm[0]['catheterization'] .= '</li>';
                    }
                    $pei_stm[0]['catheterization'] .= '</ul>';
                }
            $pei_stm[0]['urninating'] .= '</ul>';
          
            if(!empty($pei_stm[0]['menstruation_opt'])){
                $menstruation = PatientExcretionInfo::getMenstruation();
                $pei_stm[0]['menstruation'] = '<ul class="ExcretionInfo_pm">';
                $menstruation_arr = explode(",", $pei_stm[0]['menstruation_opt']);
                foreach($menstruation_arr as $km => $vm){
                    $pei_stm[0]['menstruation'] .= '<li>'.$menstruation[$vm];
                    if($vm == 4){
                        $pei_stm[0]['menstruation'] .= ' ('.$pei_stm[0]['menstruation_text'].')';
                    }
                    $pei_stm[0]['menstruation'] .= '</li>';
                }
                $pei_stm[0]['menstruation'] .= '</ul>';
            }

            if(!empty($pei_stm[0]['vomit_opt'])){
                $pei_stm[0]['vomit'] = '<ul class="ExcretionInfo_pm">';
                $vomit_arr = explode(",", $pei_stm[0]['vomit_opt']);
                foreach($vomit_arr as $km => $vm){
                    $pei_stm[0]['vomit'] .= '<li>'.$ja_nein[$vm].'</li>';
                }
                $pei_stm[0]['vomit'] .= '</ul>';
            }
            
        }
        
        return $pei_stm;
        
    }
    
    
}

?>





