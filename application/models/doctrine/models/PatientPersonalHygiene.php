<?php
// ISPC-2792 Lore 15.01.2021
/**
 * PatientPersonalHygiene
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ISPC-2792
 * @subpackage Application (2021-01-15)
 * @author     Lore <office@originalware.com>
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class PatientPersonalHygiene extends BasePatientPersonalHygiene
{            

    public function getPatientPersonalHygiene($ipid)
    {
        if (empty($ipid)) {
            return; //fail-safe
        }
        
        $loc = Doctrine_Query::create()
        ->select("*")
        ->from('PatientPersonalHygiene')
        ->andWhere("ipid= ? ", $ipid);
        $disarr = $loc->fetchArray();
        
        return $disarr;
        
    }
      
    public static function getAssessment_scale()
    {
        $assessment_scale = array(
            '1' => "Braden Q (jünger als 5 Jahre)",
            '2' => "Braden (älter als 5 Jahre)",
            '3'=> 'Sonstiges',
        );
        
        return $assessment_scale;
    }
    
    public static function getPressure_ulcer_risk()
    {
        $pressure_ulcer_risk = array(
            '1' => "Allgemeines Risiko",
            '2' => "Mittleres Risiko",
            '3' => "Hohes Risiko",
            '4' => "Sehr hohes Risiko",
            '5' => 'Anmerkungen',
        );
        
        return $pressure_ulcer_risk;
    }
    
    public static function getMattress()
    {
        $mattress = array(
            '1' => "Sterntaler",
            '2' => "Wechseldruckmatratze",
            '3'=> 'Sonstiges',
        );
        
        return $mattress;
    }
    
    public static function getTools()
    {
        $tools = array(
            '1' => 'Duschliege',
            '2' => 'Duschstuhl',
            '3' => 'Badewannenfilter'
        );
        
        return $tools;
    }
    
    public function getPersonalHygiene($ipid)
    {
        if (empty($ipid)) {
            return;
        }
        
        $pph = new PatientPersonalHygiene();
        $pph_stm = $pph->getPatientPersonalHygiene($ipid);
        //dd($pph_stm);
        if(!empty($pph_stm)){
            
            $ja_nein = array('1' => 'Nein', '2' => 'keine Angabe', '3' => 'Ja', '4' => 'Sonstiges');
            
            $pph_stm[0]['General'] = '<ul class="PersonalHygiene_pm">';
            
                if(!empty($pph_stm[0]['assessment_scale_opt'])){
                    $assessment_scale = PatientPersonalHygiene::getAssessment_scale();
                    
                    $pph_stm[0]['assessment_scale'] = '<ul class="PersonalHygiene_pm">';
                    $assessment_scale_arr = explode(",", $pph_stm[0]['assessment_scale_opt']);
                    foreach($assessment_scale_arr as $km => $vm){
                        $pph_stm[0]['assessment_scale'] .= '<li>'.$assessment_scale[$vm];
                        if($vm == 3){
                            $pph_stm[0]['assessment_scale'] .= ' ('.$pph_stm[0]['assessment_scale_text'].')';
                        }
                        $pph_stm[0]['assessment_scale'] .= '</li>';
                    }
                    $pph_stm[0]['assessment_scale'] .= '</ul>';
                }
                
                if(!empty($pph_stm[0]['pressure_ulcer_risk_opt'])){
                    $pressure_ulcer_risk = PatientPersonalHygiene::getPressure_ulcer_risk();
                    $pph_stm[0]['pressure_ulcer_risk'] = '<ul class="PersonalHygiene_pm">';
                    $pressure_ulcer_risk_arr = explode(",", $pph_stm[0]['pressure_ulcer_risk_opt']);
                    foreach($pressure_ulcer_risk_arr as $km => $vm){
                        $pph_stm[0]['pressure_ulcer_risk'] .= '<li>'.$pressure_ulcer_risk[$vm];
                        if($vm == 5){
                            $pph_stm[0]['pressure_ulcer_risk'] .= ' ('.$pph_stm[0]['pressure_ulcer_risk_text'].')';
                        }
                        $pph_stm[0]['pressure_ulcer_risk'] .= '</li>';
                    }
                    $pph_stm[0]['pressure_ulcer_risk'] .= '</ul>';
                }

           $pph_stm[0]['General'] .= '</ul>';
            
           $pph_stm[0]['personal_hygiene'] = '<ul class="PersonalHygiene_pm">';
           
               if(!empty($pph_stm[0]['pressure_ulcer_opt'])){
                   $pph_stm[0]['pressure_ulcer'] = '<ul class="PersonalHygiene_pm">';
                   $pressure_ulcer_arr = explode(",", $pph_stm[0]['pressure_ulcer_opt']);
                   foreach($pressure_ulcer_arr as $km => $vm){
                       $pph_stm[0]['pressure_ulcer'] .= '<li>'.$ja_nein[$vm];
                       if($vm == 3){
                           $pph_stm[0]['pressure_ulcer'] .= ' ('.$pph_stm[0]['pressure_ulcer_text'].')';
                       }
                       $pph_stm[0]['pressure_ulcer'] .= '</li>';
                   }
                   $pph_stm[0]['pressure_ulcer'] .= '</ul>';
               }
           
               if(!empty($pph_stm[0]['own_care_products_opt'])){
                   $pph_stm[0]['own_care_products'] = '<ul class="PersonalHygiene_pm">';
                   $own_care_products_arr = explode(",", $pph_stm[0]['own_care_products_opt']);
                   foreach($own_care_products_arr as $km => $vm){
                       $pph_stm[0]['own_care_products'] .= '<li>'.$ja_nein[$vm].'</li>';
                   }
                   $pph_stm[0]['own_care_products'] .= '</ul>';
               }
               
                if(!empty($pph_stm[0]['nail_care_allowed_opt'])){
                    $pph_stm[0]['nail_care_allowed'] = '<ul class="PersonalHygiene_pm">';
                    $nail_care_allowed_arr = explode(",", $pph_stm[0]['nail_care_allowed_opt']);
                    foreach($nail_care_allowed_arr as $km => $vm){
                        $pph_stm[0]['nail_care_allowed'] .= '<li>'.$ja_nein[$vm].'</li>';
                    }
                    $pph_stm[0]['nail_care_allowed'] .= '</ul>';
                }
                
                if(!empty($pph_stm[0]['basal_stimulation_opt'])){
                    $pph_stm[0]['basal_stimulation'] = '<ul class="PersonalHygiene_pm">';
                    $basal_stimulation_arr = explode(",", $pph_stm[0]['basal_stimulation_opt']);
                    foreach($basal_stimulation_arr as $km => $vm){
                        $pph_stm[0]['basal_stimulation'] .= '<li>'.$ja_nein[$vm];
                        if($vm == 3){
                            $pph_stm[0]['basal_stimulation'] .= ' ('.$pph_stm[0]['basal_stimulation_text'].')';
                        }
                        $pph_stm[0]['basal_stimulation'] .= '</li>';
                    }
                    $pph_stm[0]['basal_stimulation'] .= '</ul>';
                }
                
                if(!empty($pph_stm[0]['mattress_opt'])){
                    $mattress = PatientPersonalHygiene::getMattress();
                    $pph_stm[0]['mattress'] = '<ul class="PersonalHygiene_pm">';
                    $mattress_arr = explode(",", $pph_stm[0]['mattress_opt']);
                    foreach($mattress_arr as $km => $vm){
                        $pph_stm[0]['mattress'] .= '<li>'.$mattress[$vm];
                        if($vm == 3){
                            $pph_stm[0]['mattress'] .= ' ('.$pph_stm[0]['mattress_text'].')';
                        }
                        $pph_stm[0]['mattress'] .= '</li>';
                    }
                    $pph_stm[0]['mattress'] .= '</ul>';
                }
                
                if(!empty($pph_stm[0]['tools_opt'])){
                    $tools = PatientPersonalHygiene::getTools();
                    $pph_stm[0]['tools'] = '<ul class="PersonalHygiene_pm">';
                    $tools_arr = explode(",", $pph_stm[0]['tools_opt']);
                    foreach($tools_arr as $km => $vm){
                        $pph_stm[0]['tools'] .= '<li>'.$tools[$vm].'</li>';
                    }
                    $pph_stm[0]['tools'] .= '</ul>';
                }
                
            $pph_stm[0]['personal_hygiene'] .= '</ul>';
            
            
            $pph_stm[0]['Dental_and_oral_care'] = '<ul class="PersonalHygiene_pm">';
                if(!empty($pph_stm[0]['dental_care_opt'])){
                    $pph_stm[0]['dental_care'] = '<ul class="PersonalHygiene_pm">';
                    $dental_care_arr = explode(",", $pph_stm[0]['dental_care_opt']);
                    foreach($dental_care_arr as $km => $vm){
                        $pph_stm[0]['dental_care'] .= '<li>'.$ja_nein[$vm];
                        if($vm == 3){
                            $pph_stm[0]['dental_care'] .= ' ('.$pph_stm[0]['dental_care_text'].')';
                        }
                        $pph_stm[0]['dental_care'] .= '</li>';
                    }
                    $pph_stm[0]['dental_care'] .= '</ul>';
                }
                
                if(!empty($pph_stm[0]['braces_opt'])){
                    $pph_stm[0]['braces'] = '<ul class="PersonalHygiene_pm">';
                    $braces_arr = explode(",", $pph_stm[0]['braces_opt']);
                    foreach($braces_arr as $km => $vm){
                        $pph_stm[0]['braces'] .= '<li>'.$ja_nein[$vm];
                        if($vm == 3){
                            $pph_stm[0]['braces'] .= ' ('.$pph_stm[0]['braces_text'].')';
                        }
                        $pph_stm[0]['braces'] .= '</li>';
                    }
                    $pph_stm[0]['braces'] .= '</ul>';
                }
                
                if(!empty($pph_stm[0]['oral_care_opt'])){
                    $pph_stm[0]['oral_care'] = '<ul class="PersonalHygiene_pm">';
                    $oral_care_arr = explode(",", $pph_stm[0]['oral_care_opt']);
                    foreach($oral_care_arr as $km => $vm){
                        $pph_stm[0]['oral_care'] .= '<li>'.$ja_nein[$vm];
                        if($vm == 3){
                            $pph_stm[0]['oral_care'] .= ' ('.$pph_stm[0]['oral_care_text'].')';
                        }
                        $pph_stm[0]['oral_care'] .= '</li>';
                    }
                    $pph_stm[0]['oral_care'] .= '</ul>';
                }
                
            $pph_stm[0]['Dental_and_oral_care'] .= '</ul>';
          
        }
        
        return $pph_stm;
        
    }
    
    
}

?>





