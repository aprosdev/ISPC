<?php
// ISPC-2787 Lore 11.01.2021
/**
 * PatientStimulatorsInfo
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ISPC-2787
 * @subpackage Application (2021-01-11)
 * @author     Lore <office@originalware.com>
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class PatientStimulatorsInfo extends BasePatientStimulatorsInfo
{            

    public function getPatientStimulatorsInfo($ipid)
    {
        if (empty($ipid)) {
            return; //fail-safe
        }
        
        $loc = Doctrine_Query::create()
        ->select("*")
        ->from('PatientStimulatorsInfo')
        ->andWhere("ipid= ? ", $ipid);
        $disarr = $loc->fetchArray();
        
        return $disarr;
        
    }
     
    
    public function getStimulatorsInformation($ipid)
    {
        if (empty($ipid)) {
            return;
        }
        
        $pni = new PatientStimulatorsInfo();
        $pni_stm = $pni->getPatientStimulatorsInfo($ipid);

        if(!empty($pni_stm)){
            
            $ja_nein = array('1' => 'Nein', '2' => 'keine Angabe', '3' => 'Ja');
            
            if(!empty($pni_stm[0]['vagus_opt'])){
                $pni_stm[0]['vagus'] = '<ul class="stimulators_pm">';
                $vagus_opt_arr = explode(",", $pni_stm[0]['vagus_opt']);
                foreach($vagus_opt_arr as $km => $vm){
                    $pni_stm[0]['vagus'] .= '<li>'.$ja_nein[$vm];
                    if($vm == 3){
                        $pni_stm[0]['vagus'] .= ' ('.$pni_stm[0]['vagus_text'].')';
                    }
                    $pni_stm[0]['vagus'] .= '</li>';
                }
                $pni_stm[0]['vagus'] .= '</ul>';
            }
            
            if(!empty($pni_stm[0]['pacemaker_opt'])){
                $pni_stm[0]['pacemaker'] = '<ul class="stimulators_pm">';
                $pacemaker_opt_arr = explode(",", $pni_stm[0]['pacemaker_opt']);
                foreach($pacemaker_opt_arr as $km => $vm){
                    $pni_stm[0]['pacemaker'] .= '<li>'.$ja_nein[$vm];
                    if($vm == 3){
                        $pni_stm[0]['pacemaker'] .= ' ('.$pni_stm[0]['pacemaker_text'].')';
                    }
                    $pni_stm[0]['pacemaker'] .= '</li>';
                }
                $pni_stm[0]['pacemaker'] .= '</ul>';
            }
 
 
        }
        
        return $pni_stm;
        
    }
    
    
}

?>





