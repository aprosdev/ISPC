<?php

/**
 * PatientStressValues
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ISPC-2499 Lore 12.12.2019
 * @subpackage Application (2019-12-11)
 * @author     Ancuta <office@originalware.com>
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class PatientStressValues extends BasePatientStressValues
{            
    /**
     * translations are grouped into an array
     * @var unknown
     */
    const LANGUAGE_ARRAY    = 'patientstressvalues_lang';
            
    /**
     * define the FORMID and FORMNAME, if you want to piggyback some triggers
     * @var unknown
     */
    const TRIGGER_FORMID    = null;
    const TRIGGER_FORMNAME  = 'frm_patientstressvalues';
            
    /**
     * insert into patient_files will use this
     */
    const PATIENT_FILE_TABNAME  = 'PatientStressValues';
    const PATIENT_FILE_TITLE    = 'PatientStressValues PDF'; //this will be translated
            
    /**
     * insert into patient_course will use this
     */
    const PATIENT_COURSE_TITLE      = 'PatientStressValues PDF was created';
    const PATIENT_COURSE_TABNAME    = 'patientstressvalues';
    const PATIENT_COURSE_TYPE       = ''; // add letter

    public static function findFormsOfIpids($ipids =  array() , $fillFinished = null)
    {
        if (empty($ipids) || ! is_array($ipids)) {
            return; //fail-safe
        }
        
        $q = Doctrine_Query::create()
        ->select('*')
        ->from('PatientStressValues')
        ->whereIn("ipid", $ipids)
        ->andwhere('isdelete = 0');
        
        if ( ! is_null($fillFinished)) {
            $q->andWhere("id IS NOT NULL");
        }
        
        $sd_forms =  $q->fetchArray();
        
        if (empty($sd_forms)) {
            return; //you have no forms
        }
        
        return $sd_forms;
    }
    

    
    

}
