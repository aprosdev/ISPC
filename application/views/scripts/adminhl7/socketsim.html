<!--  Maria:: Migration CISPC to ISPC 22.07.2020 -->
<script>

    function prepare(){
        var t=$('#msgtype').val();
        if (t=="ADT^A02"){
            adta02();
        }
        if (t=="ADT^A01"){
            adta01();
        }
        if (t=="ADT^A04"){
            adta04();
        }
        if (t=="ADT^A08"){
            adta08();
        }
        if(t=="ORM"){
            orm();
        }
        if(t=="Goe01"){
            goe_adt1();
        }
        if(t=="ChariteA02"){
            charite_adt02();
        }
        if(t=="BB Regensburg ORM"){
            bbregensburg_orm();
        }
        if(t=="BB Regensburg A01"){
            bbregensburg_a01();
        }
    }
    function adta04(){
        var str="";
        str+="MSH|^~\\&|ISH|0015|SUBSYS||"+$("#datum").val()+"||ADT^A04|"+$("#datum").val()+"00631151|P|2.3||NP4000|AL|NE|DE\n";
        str+="EVN|A04|"+$("#datum").val()+"||PV\n";
        str+="PID||170510158|"+$("#patno").val()+"^4^M11||"+$("#patlname").val()+"^"+$("#patfname").val()+"^^^^||"+$("#birth").val()+"|M|||^^Maaskantje^^81377^D||123456789|||||||||||||DE\n";
        str+="NK1|1|Nachname^Vorname|^^ISH|^^Mainz^^81377^D|123456789^^PH\n";
        str+="PV1||O|"+$("#location").val()+"|||^^|^^^^^^|^^^^^^^^&&^^^^^|^^^^^^^^&&^^^^^||||||||||"+$("#caseno").val()+"^0^M11||K|||K||||||||||||||||||||"+$("#datum").val()+"|||||00001|\n";
        str+="ZBE|00001|"+$("#datum").val()+"||INSERT";

        $('#data_ta').val(str);
    }
    function adta02(){
        var str="";
        str+="MSH|^~\\&|ISH|0015|SUBSYS||"+$("#datum").val()+"||ADT^A02|"+$("#datum").val()+"00631151|P|2.3||NP4000|AL|NE|DE\n";
        str+="EVN|A04|"+$("#datum").val()+"||PV\n";
        str+="PID||170510158|"+$("#patno").val()+"^4^M11||"+$("#patlname").val()+"^"+$("#patfname").val()+"^^^^||"+$("#birth").val()+"|M|||^^Maaskantje^^81377^D||123456789|||||||||||||DE\n";
        str+="NK1|1|Nachname^Vorname|^^ISH|^^Mainz^^81377^D|123456789^^PH\n";
        str+="PV1||O|"+$("#location").val()+"|||^^|^^^^^^|^^^^^^^^&&^^^^^|^^^^^^^^&&^^^^^||||||||||"+$("#caseno").val()+"^0^M11||K|||K||||||||||||||||||||"+$("#datum").val()+"|||||00001|\n";
        str+="ZBE|00001|"+$("#datum").val()+"||INSERT";

        $('#data_ta').val(str);
    }
    function adta01(){
        var str="";
        str+="MSH|^~\\&|ISH|0015|SUBSYS||"+$("#datum").val()+"||ADT^A01|"+$("#datum").val()+"00631151|P|2.3||NP4000|AL|NE|DE\n";
        str+="EVN|A04|"+$("#datum").val()+"||PV\n";
        str+="PID||170510158|"+$("#patno").val()+"^4^M11||"+$("#patlname").val()+"^"+$("#patfname").val()+"^^^^||"+$("#birth").val()+"|M|||^^Maaskantje^^81377^D||123456789|||||||||||||DE\n";
        str+="NK1|1|Nachname^Vorname|^^ISH|^^Mainz^^81377^D|123456789^^PH\n";
        str+="PV1||O|"+$("#location").val()+"|||^^|^^^^^^|^^^^^^^^&&^^^^^|^^^^^^^^&&^^^^^||||||||||"+$("#caseno").val()+"^0^M11||K|||K||||||||||||||||||||"+$("#datum").val()+"|||||00001|\n";
        str+="IN1|1||01224^234534534|Siemensbkkwestost|^^Mainz^^12345^D|||19830403||||||||||||||||||23534653645||||||||";
        str+="ZBE|00001|"+$("#datum").val()+"||INSERT";

        $('#data_ta').val(str);
    }
    function adta08(){
        var str="";
        str+="MSH|^~\\&|ISH|0015|SUBSYS||"+$("#datum").val()+"||ADT^A08|"+$("#datum").val()+"00631151|P|2.3||NP4000|AL|NE|DE\n";
        str+="EVN|A04|"+$("#datum").val()+"||PV\n";
        str+="PID||170510158|"+$("#patno").val()+"^4^M11||"+$("#patlname").val()+"^"+$("#patfname").val()+"^^^^||"+$("#birth").val()+"|M|||^^Maaskantje^^81377^D||123456789|||||||||||||DE\n";
        str+="NK1|1|Nachname^Vorname|^^ISH|^^Mainz^^81377^D|123456789^^PH\n";
        str+="PV1||O|"+$("#location").val()+"|||^^|^^^^^^|^^^^^^^^&&^^^^^|^^^^^^^^&&^^^^^||||||||||"+$("#caseno").val()+"^0^M11||K|||K||||||||||||||||||||"+$("#datum").val()+"|||||00001|\n";
        str+="ZBE|00001|"+$("#datum").val()+"||INSERT";

        $('#data_ta').val(str);
    }

    function orm(){
        var str="";
        str+="MSH|^~\\&|ISH|0015|SUBSYS||"+$("#datum").val()+"||ORM^O01|"+$("#datum").val()+"00631151|P|2.3||NP4000|AL|NE|DE\n";
        str+="EVN|A04|"+$("#datum").val()+"||PV\n";
        str+="PID||170510158|"+$("#patno").val()+"^4^M11||"+$("#patlname").val()+"^"+$("#patfname").val()+"^^^^||"+$("#birth").val()+"|M|||^^Maaskantje^^81377^D||123456789|||||||||||||DE\n";
        str+="PV1||O|"+$("#location").val()+"|||^^|^^^^^^|^^^^^^^^&&^^^^^|^^^^^^^^&&^^^^^||||||||||"+$("#caseno").val()+"^0^M11||K|||K||||||||||||||||||||"+$("#datum").val()+"|||||00001|\n";
        str+="ORC|NW|0084208454||00312642|IP||^^^00000000^00000000^Elektiv,dispon.||20140812142550|||M33475^Witkowski^Lukas||7095-5585||Bitte um Palliative Übernahme|\n";
        str+="NTE||P|massiver intrahepatischer Progress des metastasierten Leiomyosarkoms.Seit dem 05.04.2013 weitere Größenprogression der multiplen intrazerebralen Metastasen mit perifokalem Ödem\\.br\\ Gamma GT 1300, Bili 8,1\\.br\\|RE|\n";
        str+="DG1|||^Uterussarkom pT1b pN1 M1 (ossär, pulmonal, hepatis|Uterussarkom pT1b pN1 M1 (ossär, pulmonal, hepatis|20130812||||||||||||D|||0000284164|\n"
        str+="OBR||0084208454||ML_IGPALLK^Palliativmedizinisches Konsil^01|||20130812142550||||||3^0^0^0^0^0^1^2^0^0^80|||M33475^Witkowski^Lukas|7095-5585|s.u.|||||||||^^^20130812142550|\n";
        str+="ZBE|00001|"+$("#datum").val()+"||INSERT";

        $('#data_ta').val(str);
    }

    function goe_adt1(){
        var str="";
        str+="MSH|^~\\&|SAP-ISH|0001|ISPC||"+$("#datum").val()+"||ADT^A01|29346900|P|2.3|||AL|NE|DE|ISO8859-15|\n";
        str+="EVN|A01|"+$("#datum").val()+"|"+$("#datum").val()+"|NP11I0|\n";
        str+="PID|||"+$("#patno").val()+"|"+$("#patno").val()+"|"+$("#patlname").val()+"^"+$("#patfname").val()+"^^^^||"+$("#birth").val()+"|F|||Tegeler Weg^^Göttingen^^37085^D||||D|NV||||||||||D||||N|\n";
        str+="NK1|1|"+$("#patlname").val()+"^|^^ISH|^^^^^D|\n";
        str+="PV1||I|0122^^^PALL|A||^^|||30171861^Nierenstein^Nina^Frau^^^Dipl.-Med.^37431^Bad Musterstadt^Oderpromenade 3||||||||||"+$("#caseno").val()+"||KS|S-A-N||||||||||||||||||||||"+$("#datum").val()+"|\n";
        str+="IN1|1||102114819^^NI~102114819^^HC|ABC Niedersachsen|Postfach^^Göttingen^^37070^D||||||||||^||||||||||||||||||||||||||||||||||T551014123|\n";
        str+="ZBE|00001^SAP-ISH^NP11I0|"+$("#datum").val()+"||INSERT|\n";
        $('#data_ta').val(str);
    }

    function charite_adt02(){
        var str = "MSH|^~\\&|SAP-ISH|050-0001|ADT ALL||"+$("#datum").val()+"||ADT^A02|75815923|P|2.2|||AL|NE|\n"
                + "EVN|A02|"+$("#datum").val()+"||V|NV11I0|\n"
                + "PID||33210825122990|"+$("#patno").val()+"||"+$("#patlname").val()+"^"+$("#patfname").val()+"^\"\"^^\"\"^\"\"|"+$("#patlname").val()+"|"+$("#birth").val()+"|M|||Koenigsallee 79/1.Og^Grunewald^Berlin^\"\"^14193^D^||8220331^email: ||D|W|EV|||||||||D|\"\"|\"\"|\n"
                + "PV1|00076|I|S14A^\"\"^\"\"|VA||S48A^S7915^S7915F|\"\"^\"\"^\"\"^\"\"^^\"\"^\"\"^\"\"^\"\"^\"\"^\"\"|0003129940^Hochschulambulanz Charité^Allgemeinchirurgie^\"\"^^\"\"^\"\"^Charitéplatz 1^Berlin^10117^D^450-652013|0003105802^Sander^H.-Henning^\"\"^^\"\"^Dr.med.^Bismarckallee 23^Berlin^14193^D^030/ 892 10 15|||||\"\"||N||E|"+$("#caseno").val()+"^8^M10|||||||||||||||||E|||SACHI||E0013^DRG-CH|||"+$("#datum").val()+"||||||00076|\n"
                + "PV2||B^Basispflegesatz|\n";
        $('#data_ta').val(str);
    }


    function bbregensburg_a01(){
        var str = "MSH|^~\\&|SAP-ISH|0001|GE-VP|HCM00311|"+$("#datum").val()+"||ADT^A01|45161208|P|2.3\n"
                + "EVN|A08|"+$("#datum").val()+"||NP12I0\n"
                + "PID||"+$("#patno").val()+"|"+$("#patno").val()+"|"+$("#caseno").val()+"|"+$("#patlname").val()+"^"+$("#patfname").val()+"^^^^|"+$("#patlname").val()+"|"+$("#birth").val()+"|M|||Weg 1^Viertel^Neunburg^^92431^DE||0111-1234567||D|S||||||||||CZ\n"
                + "PV1|1|I|IVK^IVK^IVK11^PNE|00||^^|^^^^^^|^^^^^^^^^^^||001000|||||||||"+$("#caseno").val()+"||K||||||||||||||||01^01 entlassen||PNE|||||20200520180238|20200526090519|||||00001^00\n"
                + "IN1|1||108377503|TECHNIKER KK Bayern|Bramfelderstr. 140^^Hamburg^^22305^DE||0800-2858585|||||20170101|20210326||5000^4|^^^^^||00000000|^^^^^|||01|||||||20200520|||||||G000000000||||||||^^^^^|||||G000000000\n"
                + "IN1|2||108377503|TECHNIKER KK Bayern|Bramfelderstr. 140^^Hamburg^^22305^DE||0800-2858585|||||20180412|20210326||5000^0|^^^^^||00000000|^^^^^|||01|||||||20200520|||||||G000000000||||||||^^^^^|||||G000000000\n"
                + "IN1|3||||^^^^^|||||||19531007|00000000||^|^^^^^||00000000|^^^^^|||05|||||||2020052600000000|||X||||||||||||^^^^^|||||\n"
                + "ZBE|003571105900001^SAP-ISH|"+$("#datum").val()+"||UPDATE\n";
        $('#data_ta').val(str);
    }

    function bbregensburg_orm(){
        var str = "MSH|^~\\&|CI5|088^0001|SCHILLER|FUDI-MK3|"+$("#datum").val()+"||ORM^O01^ORM_O01|12251|P|2.6|||||||||||||\n"
            + "PID||"+$("#patno").val()+"|"+$("#patno").val()+"||"+$("#patlname").val()+"^"+$("#patfname").val()+"^^^^|"+$("#patlname").val()+"|"+$("#birth").val()+"|M|||Weg 1^Viertel^Neunburg^^92431^DE||0111-1234567||D|S||||||||||CZ\n"
            + "PV1||I|00000006^00000621^00006212^MK4||||||||||||||||"+$("#caseno").val()+"|0104940005||||||||||||||||||||||||20200520124700||||||||\n"
            + "ORC|NW|0061021633||00089611|IP||^^^20200525^20200525^020||20200525101556|||HOHENESTER^Hohenester^Michaela^^^^Dr. med.|00000006^^^MK4|94135||H.a. HRST?|||||||||||||||\n"
            + "OBR|1|0061021633||ML64LZEKG1^24-h-EKG^01|||20200525101556||||||Bitte Langzeit-EKG bei Pat. mit subjektiv Palpitationen und SchwindelgefÃ¼hl, HF bis 120/min.|||HOHENESTER^Hohenester^Michaela^^^^Dr. med.|94135||0KEI;kein rel Infekt||||||||^^0000^20200525101556^20200525101556^020|||||||||||||||||||||||\n"
            + "DG1|||^Palpitationen, ossÃ¤r. met. BronchialCA^|Palpitationen, ossÃ¤r. met. BronchialCA|20200525101556|||||||||||HOHENESTER^Hohenester^Michaela^^^^Dr. med.|D|||0000072257||||||\n"
            + "";
        $('#data_ta').val(str);
    }


</script>
<?php

$fnames=array(
    'Angela', 'Gerhard', 'Helmut', 'Konrad', 'Willy', 'Ludwig', 'Kurt Georg', 'Theodor', 'Heinrich', 'Gustav', 'Walter', 'Karl', 'Richard', 'Roman', 'Johannes', 'Horst', 'Christian', 'Joachim', 'Frank-Walter'
);
$lnames=array(
    'Schmidt', 'Kohl', 'Brandt', 'Erhard', 'Kiesinger', 'Merkel', 'Erhard', 'Adenauer', 'Heuss', 'Lübke', 'Heinemann', 'Scheel', 'Carstens', 'von Weizsäcker', 'Herzog', 'Rau', 'Köhler', 'Wulff', 'Gauck', 'Steinmeier'
);
if(! isset($this->patfname)){
    $this->patfname=$fnames[rand(0,count($fnames)-1)];
}
if(! isset($this->patlname)){
    $this->patlname=$lnames[rand(0,count($lnames)-1)];
}
?>
<form method="post">
<table>
    <tr>
        <td>
            Nachrichtentyp:
        </td>
        <td>
            <select name="msgtype" id="msgtype">
                <option value="ADT^A01">ADT^A01 Aufnahme</option>
                <option value="ADT^A02">ADT^A02 Fallartwechsel</option>
                <option value="ADT^A04">ADT^A04 Amb. Aufnahme</option>
                <option value="ADT^A08">ADT^A08 Änderung</option>
                <option value="Goe01">Goettingen A01</option>
                <option value="ChariteA02">Charite A02</option>
                <option>ORM</option>
                <option value="BB Regensburg A01">BB Regensburg A01</option>
                <option value="BB Regensburg ORM">BB Regensburg ORM</option>
            </select>
        </td>
    </tr>
    <tr>
        <td>
            Name:
        </td>
        <td>
            <input name="patfname" id="patfname" value="<?php echo $this->patfname?>"> <input name="patlname" id="patlname" value="<?php echo $this->patlname?>">
        </td>
    </tr>
    <tr>
        <td>
            Geburtstag:
        </td>
        <td>
            <input name="birth" id="birth" value="<?php echo $a=($this->birth)?$this->birth:rand(1920,1970).rand(10,12).rand(10,27);?>">
        </td>
    </tr>
    <tr>
        <td>
            Patientennummer:
        </td>
        <td>
            <input name="patno" id="patno" value="<?php echo $a=($this->patno)?$this->patno:rand(10000000,00000000);?>">
        </td>
    </tr>
    <tr>
        <td>
            Fallnummer:
        </td>
        <td>
            <input name="caseno" id="caseno" value="<?php echo $a=($this->caseno)?$this->caseno:rand(10000000,00000000);?>">
        </td>
    </tr>
    <tr>
        <td>
            Location:
        </td>
        <td>
            <select name="location" id="location">
                <option>PAGL23^^^PAAL</option>
                <option>PAGSAPV^^^PAAL</option>
                <option>MIGG10A^^^M3HAEM</option>
                <option>PAGKO^^^PAAL</option>
                <option>PAGA^^^PAAL</option>
                <option>KIGSPALL^^^KKPALL</option>
            </select>
        </td>
    </tr>
    <tr>
        <td>
            Datum:
        </td>
        <td>
            <input type="text" name="datum" id="datum" value="<?php echo date("YmdHis");?>">
        </td>
    </tr>
</table>

    <input type="button" onclick="prepare()" value="generieren">

<br>


    <textarea id="data_ta" name="data" style="width:600px;height:200px;"></textarea><br>
    Server:<select name="server">
        <option>der des aktuellen Clients</option>
    </select><br>
    <input type="submit"/>
</form>

<br>
<hr>
<br>

<script>
    function seginfo(){
        $('#seginfo-tabwrap').empty();
        var x=$('#seginfo-ta').val();
        var l= x.split('|');

        var newt=$('<table class="seginfo-table">');

        for (var i=0; i< l.length; i++){
            var new_tr=$('<tr><td>'+i+'</td><td>'+l[i]+'</td></tr>');
            $(newt).append(new_tr);
        }
        $('#seginfo-tabwrap').append(newt);

    }

</script>

<div style="margin-top:4em;">
    <h2>Segment-Info</h2>
    <textarea id="seginfo-ta" style="height:2em;width:900px;"></textarea>
    <br>
    <input type="button" onclick="seginfo()" value="info">
    <br>

    <div id="seginfo-tabwrap" style="margin-top:20px;"></div>
</div>