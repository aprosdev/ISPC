<?php
//IE Freaking hack
$url = APP_BASE . "patientform/sapvfb8?" . $_SERVER['QUERY_STRING'];
if (str_replace("&cycle=" . $_REQUEST['cycle'] . "", "", $url)) {
	$finalJsUrl = str_replace("&cycle=" . $_REQUEST['cycle'] . "", "", $url);
} else {
	$finalJsUrl = $url;
}
?>
<script type="text/javascript">	
	function changeCycle(data){
		var url = "<?php echo $finalJsUrl; ?>&cycle="+data;
		$(location).attr('href',url);
	}

	$(function() {
		$('form').submit(function() {
			setTimeout(function () {$('input[type=submit]').attr('disabled', true);}, 150);
			setTimeout(function () {$('input[type=submit]').attr('disabled', false);}, 22000);
		});
		
		$('#verordnete_leistung_bis1, #verordnete_leistung_vom1').datepicker({
			showOn: "both",
			buttonImage: $('#calImg').attr('src'),
			buttonImageOnly: true,
			changeMonth: true,
			changeYear: true,
			nextText: '',
			prevText: ''
		});
	});
	function nofocheckbox(allid,tot,param)
	{
		//alert(param);

		if(param==1)
		{
			checkbox = document.getElementsByName(allid.name);
			total=0;
			for(i=0; i<checkbox.length;i++)
			{
				if(checkbox[i].checked==true)
				{
					total++;
				}
			}
			$("#total"+tot).html(total);
			$("#hdntotal"+tot).val(total);

		}
		if(param==2)
		{
			checkbox2 = document.getElementsByName(allid.name);
			secondtotal=0;
			for(j=0; j<checkbox2.length;j++)
			{
				if(checkbox2[j].checked==true)
				{
					secondtotal++;
				}
			}
			$("#second"+tot).html(secondtotal);
			$("#hdnsecond"+tot).val(secondtotal);

		}

		if(parseInt($("#totalone").html())>0 && parseInt($("#secondtwoone").html())>0)
		{
			$("#bothone").html(parseInt($("#totalone").html())+parseInt($("#secondtwoone").html()));
			$("#hdnbothone").val(parseInt($("#totalone").html())+parseInt($("#secondtwoone").html()));
		}

		if(parseInt($("#totaltwo").html())>0 && parseInt($("#secondtwotwo").html())>0)
		{
			$("#bothtwo").html(parseInt($("#totaltwo").html())+parseInt($("#secondtwotwo").html()));
			$("#hdnbothtwo").val(parseInt($("#totaltwo").html())+parseInt($("#secondtwotwo").html()));
		}

		if(parseInt($("#totalthree").html())>0 && parseInt($("#secondtwothree").html())>0)
		{
			$("#boththree").html(parseInt($("#totalthree").html())+parseInt($("#secondtwothree").html()));
			$("#hdnboththree").val(parseInt($("#totalthree").html())+parseInt($("#secondtwothree").html()));
		}

		if(parseInt($("#totalfour").html())>0 && parseInt($("#secondtwofour").html())>0)
		{
			$("#bothfour").html(parseInt($("#totalfour").html())+parseInt($("#secondtwofour").html()));
			$("#hdnbothfour").val(parseInt($("#totalfour").html())+parseInt($("#secondtwofour").html()));
		}

		if(parseInt($("#totalfive").html())>0 && parseInt($("#secondtwofive").html())>0)
		{
			$("#bothfive").html(parseInt($("#totalfive").html())+parseInt($("#secondtwofive").html()));
			$("#hdnbothfive").val(parseInt($("#totalfive").html())+parseInt($("#secondtwofive").html()));
		}

		if(parseInt($("#totalsix").html())>0 && parseInt($("#secondtwosix").html())>0)
		{
			$("#bothsix").html(parseInt($("#totalsix").html())+parseInt($("#secondtwosix").html()));
			$("#hdnbothsix").val(parseInt($("#totalsix").html())+parseInt($("#secondtwosix").html()));
		}

		if(parseInt($("#totalseven").html())>0 && parseInt($("#secondtwoseven").html())>0)
		{
			$("#bothseven").html(parseInt($("#totalseven").html())+parseInt($("#secondtwoseven").html()));
			$("#hdnbothseven").val(parseInt($("#totalseven").html())+parseInt($("#secondtwoseven").html()));
		}

		if(parseInt($("#totaleight").html())>0 && parseInt($("#secondtwoeight").html())>0)
		{
			$("#botheight").html(parseInt($("#totaleight").html())+parseInt($("#secondtwoeight").html()));
			$("#hdnbotheight").val(parseInt($("#totaleight").html())+parseInt($("#secondtwoeight").html()));
		}

		if(parseInt($("#totalnine").html())>0 && parseInt($("#secondtwonine").html())>0)
		{
			$("#bothnine").html(parseInt($("#totalnine").html())+parseInt($("#secondtwonine").html()));
			$("#hdnbothnine").val(parseInt($("#totalnine").html())+parseInt($("#secondtwonine").html()));
		}

	}
</script>
<?php $this->headLink()->appendStylesheet(RES_FILE_PATH . '/css/page-css/sapvfb8_style.css'); ?>
<div style="display: none"> <img id="calImg" src="<?php echo RES_FILE_PATH;  ?>/images/calendar.png" alt="Popup" class="trigger"></div>
<form id="CreTtemFurthFrm" action="" method="post">
	<div style="display: none;"> <img src="<?php echo RES_FILE_PATH; ?>/images/calendar.png" alt="Popup" class="trigger" /> </div>
	<?php echo $this->patientinfo ?>
	<?php echo $this->tabmenus ?>
	<div class="tab_container">

		<div id="Palliative">
			<div id="Gradingfrm_headingouter" class="Palliative_Heading">
				<div id="Gradingfrm_heading" class="Palliative_Heading_Left">Leistungsnachweis</div>
				<div id="Gradingfrm_subhead" class="Palliative_Heading_Right"></div>
				<div class="ClrBoth"></div>
			</div>
			<div id="Gradingfrm_header" class="Palliative_Header Palliative_Header_TableWidht">
				<div id="Gradingfrm_header_content" class="Palliative_Contnet_Outer Palliative_Contnet_Outer_widht">
					<div id="Gradingfrm_content_outer" class="Palliative_Contnet_Outer">
						<div id="Gradingfrm_name" class="Recncilition"><strong>Patient:</strong> Name,

							Vorname</div>
						<div id="Gradingfrm_nme_content" class="Recncilition">
							<label id="Gradingfrm_txtbox_lbl">
								<input id="Gradingfrm_txtbox_inpt" type="text" name="patient_name" value="<?php echo $this->patientname ?>" class="MarginZero" style="width:300px;" />
							</label>
						</div>
					</div>
					<div class="ClrBoth"></div>
					<div id="Gradingfrm_brder" class="BorderDiv"></div>
				</div>
				<div id="Gradingfrm_IdInfo" class="RecncilitionIdInfo">
					<div id="Gradingfrm_IdInfo_am">geboren am : <input name="birthd" type="hidden" value="<?php echo $this->bdate ?>" /><?php echo $this->bdate ?></div>
					<br />
					<div id="Gradingfrm_IdInfo_id">ID: <?php echo $this->epid ?><input name="epid" type="hidden" value="<?php echo $this->epid ?>" /></div>
					<br />
					<div id="Gradingfrm_IdInfo_id"><?php echo $this->translate('admissioncycles') ?>

						<?php
						$montharay = $this->admissionCycles;
						$sel_value = $this->cycleSelected;

						if (count($montharay) > 0) {
							echo '<select name="month" id="month" onChange="changeCycle(this.value);" class="admissionCycleSelect">';

							foreach ($this->admissionCycles as $km => $vm) {

								if ($sel_value == $km) {
									$selected = 'selected="selected"';
								} else {
									$selected = '';
								}
								echo '<option value="' . $km . '" ' . $selected . ' >' . $vm . '</option>';
							}

							echo "</select>";
						} else {
							echo end($montharay);
						}
						?>
					</div>
				</div>
				<div class="ClrBoth"></div>
				<div id="Gradingfrm_AdrsInfo" class="Address_Info">
					<div id="Gradingfrm_AdrsInfoList" class="Address_Info_Outer_list">
						<div id="Gradingfrm_AdrsInfoOuter" class="Address_Info_Outer">
							<div id="Gradingfrm_AdrsInfo_head" class="Address_Info_left">Strasse</div>
							<div id="Gradingfrm_AdrsInfo_content" class="Address_Info_right">
								<label id="Gradingfrm_strase_lbl">
									<input id="Gradingfrm_strase_inpt" name="street" value="<?php echo $this->street ?>" type="text" class="MarginZero" />
								</label>
							</div>
							<div class="ClrBoth"></div>
						</div>
						<div id="Gradingfrm_AdrsInfo_Ort" class="Address_Info_Outer">
							<div id="Gradingfrm_AdrsInfo_Ort_heading" class="Address_Info_left">PLZ, Ort</div>
							<div id="Gradingfrm_AdrsInfo_Ort" class="Address_Info_right">
								<label id="Gradingfrm_ort_lbl">
									<input id="Gradingfrm_ort_inpt" name="zip" type="text" value="<?php echo $this->zip ?>" class="MarginZero" />
								</label>
							</div>
							<div class="ClrBoth"></div>
						</div>
						<div id="Gradingfrm_telefon" class="Address_Info_Outer">
							<div id="Gradingfrm_telefon_head" class="Address_Info_left">Telefon</div>
							<div id="Gradingfrm_telefon_content" class="Address_Info_right">
								<label id="Gradingfrm_telefon_lbl">
									<input id="Gradingfrm_telefon_inpt" name="telephon" value="<?php echo $this->telephone ?>" type="text" class="MarginZero" />
								</label>
							</div>
							<div class="ClrBoth"></div>
						</div>
						<div id="Gradingfrm_Krankenkasse" class="Address_Info_Outer">
							<div id="Gradingfrm_Krankenkasse_head" class="Address_Info_left">Krankenkasse</div>
							<div id="Gradingfrm_Krankenkasse_content" class="Address_Info_right">
								<label id="Gradingfrm_Krankenkasse_lbl">
									<input id="Gradingfrm_Krankenkasse_inpt" name="insurance_com_name" value="<?php echo $this->insurance_company_name ?>" type="text" class="MarginZero" />
								</label>
							</div>
							<div class="ClrBoth"></div>
						</div>
					</div>
					<div id="Gradingfrm_oder" class="GrayDivider"></div>
					<div id="Gradingfrm_oder_list" class="Address_Info_Outer_list Address_Info_Outer_listMargin">
						<div id="Gradingfrm_oder_outr" class="Address_Info_Outer">
							<div id="Gradingfrm_oder_head" class="Address_Info_left">oder:</div>
							<div id="Gradingfrm_oder_content" class="Address_Info_right">
								<label id="Gradingfrm_oder_lbl">
									<input id="Gradingfrm_oder_inpt" name="mobile" value="<?php echo $this->mobile ?>" type="text" class="MarginZero" />
								</label>
							</div>
							<div class="ClrBoth"></div>
						</div>
						<div id="Gradingfrm_Versicherten" class="Address_Info_Outer">
							<div id="Gradingfrm_Versicherten_head" class="Address_Info_left"><strong>Versicherten-Nr.</strong></div>
							<div id="Gradingfrm_Versicherten_content" class="Address_Info_right">
								<label id="Gradingfrm_Versicherten_lbl">
									<input id="Gradingfrm_Versicherten_inpt" name="insurance_no" value="<?php echo $this->insurance_no ?>" type="text" class="MarginZero" />
								</label>
							</div>
							<div class="ClrBoth"></div>
						</div>
					</div>
					<div class="ClrBoth"></div>
					<div class="ClrBoth"></div>
				</div>
			</div>
			<div id="CheckboxGridsTable">
				<div id="Gradingfrm_vereinbarte" class="RelevanteListOuter">
					<div id="Gradingfrm_vereinbarte_head" class="RelevanteList_left_SapvfNew"><strong>Feststellung AAPV / SAPV:</strong></div>
					<div id="Gradingfrm_vereinbarte_content" class="RelevanteList_left"><div id="FestllungAap_inpOuter" class="CheckboxGrids_heading_left paddingZero">
							<label id="FestllungAap_inpLbl">
								<input id="FestllungAap_inpt" type="checkbox" name="feststellung_aapv" value="1" class="MarginZero" />
							</label>
						</div>
					</div>
					<div class="ClrBoth"></div>
				</div>
				<div id="Gradingfrm_weitere" class="RelevanteListOuter">
					<div id="Gradingfrm_weitere_head" class="RelevanteList_left_SapvfNew"><strong>verordnete Leistung:</strong></div>
					<div id="Gradingfrm_PflegeheimOuter" class="RelevanteList_left">
						<div id="Gradingfrm_nein" class="RelevanteList_left">
							<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
								<div id="Gradingfrm_nein_content" class="CheckboxGrids_heading_left paddingZero">
									<label id="Gradingfrm_nein_lbl">
										<input id="beratung" type="checkbox" name="Beratung" value="1" class="MarginZero" />
									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">Beratung</div>
								<div class="ClrBoth"></div>
							</div>
						</div>
						<div class="ClrBoth"></div>
					</div>
					<div id="Gradingfrm_PflegeheimOuter" class="RelevanteList_left">
						<div id="Gradingfrm_nein" class="RelevanteList_left">
							<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
								<div id="Gradingfrm_nein_content" class="CheckboxGrids_heading_left">
									<label id="Gradingfrm_nein_lbl">
										<input id="koordination" type="checkbox" name="koordination" value="1" class="MarginZero" />
									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">Koordination</div>
								<div class="ClrBoth"></div>
							</div>
						</div>
						<div class="ClrBoth"></div>
					</div>
					<div id="Gradingfrm_PflegeheimOuter" class="RelevanteList_left">
						<div id="Gradingfrm_nein" class="RelevanteList_left">
							<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
								<div id="Gradingfrm_nein_content" class="CheckboxGrids_heading_left">
									<label id="Gradingfrm_nein_lbl">
										<input id="Gradingfrm_nein_inpg" type="checkbox" name="teilversorgung" value="1" class="MarginZero" />
									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">Teilversorgung</div>
								<div class="ClrBoth"></div>
							</div>
						</div>
						<div class="ClrBoth"></div>
					</div>
					<div id="Gradingfrm_PflegeheimOuter" class="RelevanteList_left">
						<div id="Gradingfrm_nein" class="RelevanteList_left">
							<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
								<div id="Gradingfrm_nein_content" class="CheckboxGrids_heading_left">
									<label id="Gradingfrm_nein_lbl">
										<input id="Gradingfrm_nein_vollversorgung" type="checkbox" name="vollversorgung" value="1" class="MarginZero" />
									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">Vollversorgung</div>
								<div class="ClrBoth"></div>
							</div>
						</div>
						<div class="ClrBoth"></div>
					</div>
				</div>
				<div class="ClrBoth"></div>
				<div id="Gradingfrm_Zirndorf" class="RelevanteListOuter">
					<div id="Gradingfrm_Zirndorf_head" class="RelevanteList_left_SapvfNew"><strong>SAPV Versorgung von Krankenkasse abgelehnt nach</strong></div>
					<div id="Gradingfrm_nein" class="RelevanteList_left">
						<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
							<div id="Gradingfrm_nein_content" class="CheckboxGrids_heading_left paddingZero">
								<label>
									<input type="text" name="sapv_versorgung_von" id="sapv_versorgung_von"  class="MarginZero" />
								</label>
								<label> </label>
							</div>
							<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">Tagen</div>
							<div class="ClrBoth"></div>
						</div>
					</div>
					<div class="ClrBoth"></div>
				</div>
				<div id="Gradingfrm_weitere" class="RelevanteListOuter">
					<div id="Gradingfrm_weitere_head" class="textbxLbl RelevanteList_left_SapvfNew"><strong>Betreuungsdauer:</strong></div>
					<div id="Gradingfrm_PflegeheimOuter" class="RelevanteList_left">
						<div id="Gradingfrm_nein" class="RelevanteList_left">
							<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
								<div id="Gradingfrm_nein_heading" class="textbxLbl CheckboxGrids_heading_left">vom</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">
									<label>
										<input type="text" name="verordnete_leistung_vom1" value="<?php echo $this->admission_date ?>" id="verordnete_leistung_vom1"   >

									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left"></div>
								<div id="Gradingfrm_nein_heading" class="textbxLbl CheckboxGrids_heading_left">bis</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">
									<label>
										<input type="text" name="verordnete_leistung_bis1" value="<?php echo $this->discharge_date ?>" id="verordnete_leistung_bis1" class="MarginZero"  />
									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">
									<label>                  </label>
								</div>
								<div class="ClrBoth"></div>
							</div>
						</div>
						<div class="ClrBoth"></div>
					</div>
					<div id="Gradingfrm_nein" class="RelevanteList_left">
						<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
							<div id="Gradingfrm_nein_heading" class="textbxLbl CheckboxGrids_heading_left">Gesamt :</div>
							<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">
								<label>
									<input type="text" name="gesamt" id="gesamt" value="<?php echo $this->days_treated ?>" class="MarginZero" style="width:70px;" />
								</label>
								Tage
							</div>
							<div class="ClrBoth"></div>
						</div>
					</div>
					<div class="ClrBoth"></div>
				</div>
			</div>
			<div id="scrolldiv" style="overflow:auto; width:840px; display:block;">
				<div id="GradingTable">
					<table width="100%" border="0" cellspacing="0" cellpadding="0">
						<tr>
							<?
//	get hospitals for 4th column START
//	get master hospital client locations
							$pmaster = new PatientMaster();
							$hospitalids = Doctrine_Query::create()
								   ->select("*")
								   ->from('Locations')
								   ->where('isdelete = 0')
								   ->andWhere('client_id ="' . $this->clientid . '"')
								   ->andWhere('location_type = 1');

							$hosparray = $hospitalids->fetchArray();

							$hospstr = "'999999999999'";
							$hosparr[] = "9999999999";
							foreach ($hosparray as $hospital) {
								$hospstr .= ", '" . $hospital['id'] . "'";
								$hosparr[] = $hospital['id'];
							}



//	get patient hospital locations if it has
							$patloc = Doctrine_Query::create()
								   ->select('*')
								   ->from('PatientLocation')
								   ->where('ipid ="' . $this->ipid . '"')
								   ->andWhere('isdelete="0"')
								   ->andWhereIn('location_id', $hosparr)
								   ->orderBy('valid_from,id ASC');

							$patlocationsArr = $patloc->fetchArray();

							$outHospitalDays[] = '9999999999999';
							foreach ($patlocationsArr as $hospitalPeriod) {
								if ($hospitalPeriod['valid_till'] == "0000-00-00 00:00:00") {
									$valid_till = date("Y-m-d");
								} else {
									$valid_till = date("Y-m-d", strtotime("-1 day", strtotime($hospitalPeriod['valid_till'])));
								}
								if($_REQUEST['dbg'] == "1"){
									print_r("HospPeriods\n\n");
									print_r($patlocationsArr);

									print_r("Valid Till: \n\n");
									print_r($valid_till);
								}
								$dayshospital['hospitalDays'][] = $pmaster->getDaysInBetween(date("Y-m-d", strtotime("+1 day", strtotime($hospitalPeriod['valid_from']))), $valid_till);

								$inHospitalDays[] = date("Y-m-d", strtotime($hospitalPeriod['valid_from']));
								$outHospitalDays[] = date("Y-m-d", strtotime($hospitalPeriod['valid_till']));

							}

							foreach($inHospitalDays as $k_inhosp => $v_inhosp)
							{
								if(in_array($v_inhosp, $outHospitalDays))
								{
									$continuous_hosp_days[] = $v_inhosp;
								}

							}

							$hospitalizedDays[] = "99999999";
							foreach ($dayshospital['hospitalDays'] as $hdayarr) {
								foreach ($hdayarr as $hday) {
									$hospitalizedDays[] = date("d.m.Y", strtotime($hday));
								}
							}

							if($_REQUEST['dbg'] == "1"){
								print_r("HospDays\n\n");
								print_r($hospitalizedDays);

							}
							$disPeriods = $this->dischargedPeriods;
							$dischargedDays[] = "9999999999";
							foreach($disPeriods as $keyDp => $valDp){
								if(strlen($valDp['start'])>0 && strlen($valDp['end'])>0 && ($valDp['start'] != $valDp['end'])){
									$dischargedDays[] = $pmaster->getDaysInBetween(date("Y-m-d", strtotime($valDp['start'])), date("Y-m-d", strtotime($valDp['end'])));
								} else if($valDp['start'] == $valDp['end']){
								}
							}
							if($_REQUEST['dbg'] == "1"){

								print_r("\nDischarged Periods\n");
								print_r($patlocationsArr);

								print_r("\nDischarged Days\n");
								print_r($dischargedDays);
							}
							$dischDays[] = "99999999999999";
							foreach ($dischargedDays as $ddayarr) {
								foreach ($ddayarr as $dday) {
									$dischDays[] = date("d.m.Y", strtotime($dday));
								}
							}
//	get hospitals for 4th column END



							$montexpl = explode(",", $this->sapmonth);
							$montexpl = array_unique($montexpl);
							asort($montexpl);

							$cc = count($montexpl);
							$firstyear = substr($montexpl[0], 0, 4);
							$firstmonth = str_replace($firstyear, "", $montexpl[0]);

							$date = $firstyear . "-" . $firstmonth . "-01";
							$starttime = strtotime($date);

							$diffdates = $pmaster->GetTreatedDays($date, date("Y-m-d", mktime(0, 0, 0, date("m") + 1, 01, date("Y"))), true);

							$verdung = explode(",", $this->verdung);
							$verdung = array_unique($verdung);
							asort($verdung);

							if (count($verdung) > 0 && !empty($verdung[0])) {
								foreach ($verdung as $key => $val) {
									$month = substr($val, -2, 2);
									$year = substr($val, 0, 4);

									$months[] = $year . "-" . $month;
								}
							}

							if (count($montexpl) > 0 && !empty($montexpl[0])) {
								foreach ($montexpl as $key => $monte) {
									$month = substr($monte, -2, 2);
									$year = substr($monte, 0, 4);

									$months[] = $year . "-" . $month;
								}
							}
							$months = array_unique($months);

							asort($months);


$activeDays = $this->activeDays;

					foreach ($months as $mth) {
								list($year, $mth) = explode("-", $mth);
								$cnter++;
								?>
								<?php
								$m_list = '
    <td valign="top"><div id="GradingTableOuter" class="left">
          <table width="390" border="0" cellspacing="0" cellpadding="0">
            <tr>
              <td align="center" valign="middle" class="WhiteBrdrBtm" id="Gradingfrm_Monat_head2" >&nbsp;</td>
              <td align="center" valign="middle" id="Gradingfrm_Prufung_head2" class="WhiteBrdrBtm">&nbsp;</td>
              <td align="center" valign="middle" id="Gradingfrm_Beratung_head2" class="WhiteBrdrBtm">&nbsp;</td>
              <td align="center" valign="middle" id="Gradingfrm_aad_head2" class="WhiteBrdrBtm">&nbsp;</td>
              <td align="center" valign="middle" id="Gradingfrm_aad_head2" class="WhiteBrdrBtm">&nbsp;</td>
              <td align="center" valign="middle" id="Gradingfrm_Voll_head2" class="WhiteBrdrBtm">&nbsp;</td>
              <td align="center" valign="middle" id="Gradingfrm_Voll_head2" class="WhiteBrdrBtm">&nbsp;</td>
              <td align="center" valign="middle" id="Gradingfrm_Uhr_head2" class="WhiteBrdrBtm">&nbsp;</td>
              <td colspan="3" align="left" valign="top" class="GradingTableForHeading"  id="Gradingfrm_Einsatzdauer_head2"><strong id="Gradingfrm_NewBox_Einsatzdauer2">Einsatzdauer</strong></td>
              <td align="center" valign="middle" id="Gradingfrm_Fahrkilometer_head2" class="WhiteBrdrBtm">&nbsp;</td>
            </tr>
            <tr id="Gradingfrm_Row1">
              <td width="34" height="57" align="center" valign="middle" class="WhiteBrdrTop" id="Gradingfrm_Monat_head"><img src="images/' . date("F", mktime(0, 0, 0, $mth, "2", $year)) . '.jpg"/></td>
              <td width="34" height="57" align="center" valign="middle" id="Gradingfrm_Prufung_head"><img src="images/sapvb8_02.jpg" /></td>
              <td width="34" height="57" align="center" valign="middle" id="Gradingfrm_Beratung_head"><img src="images/sapvb8_03.jpg"  /></td>
              <td width="34" height="57" align="center" valign="middle" id="Gradingfrm_aad_head"><img src="images/sapvb8_04.jpg"></td>
              <td width="34" align="center" valign="middle" id="Gradingfrm_aad_head"><img src="images/sapvb8_05.jpg"></td>
              <td width="34" height="57" align="center" valign="middle" id="Gradingfrm_Voll_head"><img src="images/sapvb8_06.jpg"></td>
              <td width="34" align="center" valign="middle" id="Gradingfrm_Voll_head"><img src="images/sapvb8_07.jpg"></td>
              <td width="34" height="57" align="center" valign="middle" id="Gradingfrm_Uhr_head"><img src="images/sapvb8_01.jpg"></td>
              <td height="57" align="center" valign="middle" class="GradingTableForHeading" id="Gradingfrm_Einsatzdauer_head"><img src="images/sapvbf8_7.jpg"/></td>
              <td height="57" align="center" valign="middle" class="GradingTableForHeading" id="Gradingfrm_Einsatzdauer_head"><img src="images/sapvbf8_8.jpg"/></td>
              <td height="57" align="center" valign="middle" class="GradingTableForHeading" id="Gradingfrm_Einsatzdauer_head"><img src="images/sapvbf8_9.jpg"/></td>
              <td width="34" height="57" align="center" valign="middle" id="Gradingfrm_Fahrkilometer_head"><img src="images/sapvbf8_10.jpg"/></td>
            </tr>';

								$total1 = "";
								$total2 = "";
								$total3 = "";
								$total4 = "";
								$total5 = "";
								$total6 = "";
								$total7 = "";
								$total8 = "";
								$total9 = "";
								$total10 = "";
								$total11 = "";
								$days = date('t', mktime(0, 0, 0, $mth, 1, $year));// Added 31.05.2013

								for ($d = 1; $d <= $days; $d++) {

									$currentListingDay = date("Y-m-d", strtotime($d . "-" . $mth . "-" . $year));
									if ((in_array($currentListingDay, $activeDays) && $sel_value != "-1") || ($sel_value == "-1")) {
										$m_list .= '<tr id="Gradingfrm_Row3">
              <td width="34" align="left" id="Gradingfrm_head1"><strong>' . $d . '</strong></td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox1"><label id="Gradingfrm_Onechkbox1_lbl">
';
										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date("Y-m-d", mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);
										$count = "";
										$usercount = array();
										foreach ($symarray as $key => $val) {
											$serial = explode(",", $val['sapvalues']);

											if (!is_array($usercount[$val['change_user']])) {
												$usercount[$val['change_user']] = array();
											}

											if ($val['change_user'] > 0 && is_array($serial)) {

												for ($tv = 1; $tv <= 3; $tv++) {
													if (in_array($tv, $serial)) {
														$usercount[$val['change_user']][] = $tv;
														break;
													}
												}
											} elseif ($val['create_user'] > 0 && is_array($serial)) {

												for ($tv = 1; $tv <= 3; $tv++) {
													if (in_array($tv, $serial)) {
														$usercount[$val['create_user']][] = $tv;
														break;
													}
												}
											}
										}

										foreach ($usercount as $userc) {
											$count+=count($userc);
										}


										if ($count > 0) {
											$m_list .= $count;
										}


										$total1+=$count;
										$final1+=$count;
										$m_list .= '
              </label></td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox2"><label id="Gradingfrm_Onechkbox2_lbl">
';

										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date('Y-m-d', mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);

										$totaldavon_fahrtzeit = "";
										$usercount = array();
										foreach ($symarray as $key => $val) {
											$serial = explode(",", $val['sapvalues']);

											if (!is_array($usercount[$val['change_user']])) {
												$usercount[$val['change_user']] = array();
											}

											if ($val['change_user'] > 0 && $val['davon_fahrtzeit'] > 0) {

												$totaldavon_fahrtzeit += $val['davon_fahrtzeit'];
											} elseif ($val['create_user'] > 0 && $val['davon_fahrtzeit'] > 0) {

												$totaldavon_fahrtzeit += $val['davon_fahrtzeit'];
											}
										}


										if ($totaldavon_fahrtzeit > 0) {
											$m_list .= $totaldavon_fahrtzeit;
										}

										$total2 += $totaldavon_fahrtzeit;
										$final2+=$totaldavon_fahrtzeit;
										$m_list .= '
              </label></td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox3"><label id="Gradingfrm_Onechkbox3_lbl">
';

										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date('Y-m-d', mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);

										$count = "";
										$usercount = array();
										foreach ($symarray as $key => $val) {
											$serial = explode(",", $val['sapvalues']);

											if (!is_array($usercount[$val['change_user']])) {
												$usercount[$val['change_user']] = array();
											}

											if ($val['change_user'] > 0 && is_array($serial)) {

												for ($tv = 20; $tv <= 60; $tv++) {
													if (in_array($tv, $serial)) {
														$usercount[$val['change_user']][] = $tv;
														break;
													}
												}
											} elseif ($val['create_user'] > 0 && is_array($serial)) {

												for ($tv = 20; $tv <= 60; $tv++) {
													if (in_array($tv, $serial)) {
														$usercount[$val['create_user']][] = $tv;
														break;
													}
												}
											}
										}

										foreach ($usercount as $userc) {
											$count+=count($userc);
										}
										if ($count > 0) {
											$m_list .= $count;
										}

										$total3+=$count;
										$final3+=$count;

										$m_list .= '
              </label></td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox3">
';

										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date('Y-m-d', mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);

										$count = "";
										$isdis = false;
										if($_REQUEST['dbg']=="1"){
											print_r("AAAAAAAA=>".$this->discharge_date);
											print_r("BBBB=>".date("Y-m-d", $this->discharge_date));
										}
										if (strlen($this->discharge_date) > 0 && $this->discharge_date != '0000-00-00 00:00:00') {
											$disdate = strtotime($this->discharge_date);
											$isdis = true;
										}
										$curdate = mktime(0, 0, 0, $mth, $d, $year);
										if (is_array($this->savarry) && count($this->savarry) > 0 && !in_array(date('Y-m-d', $curdate), $continuous_hosp_days)) {
											foreach ($this->savarry as $key => $val) {
												$veraray = explode(",", $val['verordnet']);

												$fromdate = strtotime($val['verordnungam']);
												$tilldate = strtotime($val['verordnungbis']);

												$firstAdmission = $this->firstAdmission;

												$todIds = $this->todids;
												$patientDisData = $this->patientdisdata;


												$DischargedDeadHosp = "";

					if (
						   in_array(date("Y-m-d", $curdate), $outHospitalDays) &&
						   $curdate == strtotime(date("Y-m-d", $disdate)) &&
						   in_array($patientDisData[0]['discharge_method'], $todIds) &&
						   !in_array(date("Y-m-d", $disdate), $inHospitalDays)
					)
					{
						$outDischargedDeadHosp = strtotime(date("Y-m-d", strtotime($patientDisData[0]['discharge_date'])));
					}
					else
					{
						$outDischargedDeadHosp = strtotime("1970-01-01");
					}

												if ($val['status'] != "1" && !in_array(date("d.m.Y", $curdate), $hospitalizedDays) && !in_array(date("d.m.Y", $curdate), $dischDays) && $curdate >= strtotime($firstAdmission) && ($curdate != $outDischargedDeadHosp)) {
													if (in_array(3, $veraray)) {
														$intersected = Pms_CommonData::isintersected($fromdate, $tilldate, $curdate, $curdate);
														if ($isdis == true) {
															if ($intersected && $curdate <= $disdate && $curdate <= mktime(0, 0, 0, date("m"), date("d"), date('Y'))) {
																$count = 1;
															}
														} else {
															if ($intersected && $curdate <= mktime(0, 0, 0, date("m"), date("d"), date('Y'))) {
																$count = 1;
															}
														}
													}

													if (in_array(4, $veraray)) {
														$intersected = Pms_CommonData::isintersected($fromdate, $tilldate, $curdate, $curdate);
														if ($isdis == true) {
															if ($intersected && $curdate <= $disdate && $curdate <= mktime(0, 0, 0, date("m"), date("d"), date('Y'))) {
																$count = 1;
															}
														} else {
															if ($intersected && $curdate <= mktime(0, 0, 0, date("m"), date("d"), date('Y'))) {
																$count = 1;
															}
														}
													}
												}
											}
										}


										$usercount = array();

										foreach ($symarray as $key => $val) {

											if (strlen($val['sapvalues']) > 0) {
												$serial = explode(",", $val['sapvalues']);

												/* if(!is_array($usercount[$val['change_user']]))
												  {
												  $usercount[$val['change_user']] = array();
												  } */

												if ($val['change_user'] > 0 && is_array($serial) && in_array(61, $serial)) {
													$usercount[$val['change_user']][] = 61;
												} elseif ($val['create_user'] > 0 && is_array($serial) && in_array(61, $serial)) {
													$usercount[$val['create_user']][] = 61;
												}
											}
										}
										if (count($usercount) > 0) {
											foreach ($usercount as $userc) {
												$count = 1;
												$fcount+=count($userc);
											}
										}
										if ($count > 0) {
											$m_list .= $count;
										}
										$total4+=$count;
										$final4+=$count;
										$m_list .= '</td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox4"><label id="Gradingfrm_Onechkbox4_lbl">
';

										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date('Y-m-d', mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);

										$count = "";
										$usercount = array();
										foreach ($symarray as $key => $val) {
											$serial = explode(",", $val['sapvalues']);

											if (!is_array($usercount[$val['change_user']])) {
												$usercount[$val['change_user']] = array();
											}

											if ($val['change_user'] > 0 && is_array($serial)) {

												for ($tv = 8; $tv <= 19; $tv++) {
													if (in_array($tv, $serial)) {
														$usercount[$val['change_user']][] = $tv;
														break;
													}
												}
											} elseif ($val['create_user'] > 0 && is_array($serial)) {

												for ($tv = 8; $tv <= 19; $tv++) {
													if (in_array($tv, $serial)) {
														$usercount[$val['create_user']][] = $tv;
														break;
													}
												}
											}
											if ($val['change_user'] > 0 && is_array($serial) && in_array(62, $serial)) {
												$usercount[$val['change_user']][] = 62;
											} elseif ($val['create_user'] > 0 && is_array($serial) && in_array(62, $serial)) {
												$usercount[$val['create_user']][] = 62;
											}
										}

										foreach ($usercount as $userc) {
											$count+=count($userc);
										}
										if ($count > 0) {
											$m_list .= $count;
										}

										$total5+=$count;
										$final5+=$count;
										$m_list .= '
              </label></td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox4">
';
										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date('Y-m-d', mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);
										$count = "";
										$usercount = array();
										foreach ($symarray as $key => $val) {
											$serial = explode(",", $val['sapvalues']);

											if (!is_array($usercount[$val['change_user']])) {
												$usercount[$val['change_user']] = array();
											}

											if ($val['change_user'] > 0 && is_array($serial)) {

												for ($tv = 4; $tv <= 6; $tv++) {
													if (in_array($tv, $serial)) {
														$usercount[$val['change_user']][] = $tv;
														break;
													}
												}
											} elseif ($val['create_user'] > 0 && is_array($serial)) {

												for ($tv = 4; $tv <= 6; $tv++) {
													if (in_array($tv, $serial)) {
														$usercount[$val['create_user']][] = $tv;
														break;
													}
												}
											}
										}

										foreach ($usercount as $userc) {
											$count+=count($userc);
										}
										if ($count > 0) {
											$m_list .= $count;
										}

										$total6+=$count;
										$final6+=$count;

										$m_list .= '&nbsp;</td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox5"><label id="Gradingfrm_Onechkbox5_lbl">
';
										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date('Y-m-d', mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);
										$count = "";
										$usercount = array();
										foreach ($symarray as $key => $val) {
											$serial = explode(",", $val['sapvalues']);

											if (!is_array($usercount[$val['change_user']])) {
												$usercount[$val['change_user']] = array();
											}

											if ($val['change_user'] > 0 && is_array($serial)) {


												if (in_array(7, $serial)) {
													$usercount[$val['change_user']][] = 7;
												}
											} elseif ($val['create_user'] > 0 && is_array($serial)) {


												if (in_array(7, $serial)) {
													$usercount[$val['create_user']][] = 7;
												}
											}
										}

										foreach ($usercount as $userc) {
											$count+=count($userc);
										}
										if ($count > 0) {
											$m_list .= $count;
										}

										$total7+=$count;
										$final7+=$count;
										$m_list .= '
              </label></td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox6"><label id="Gradingfrm_Onechkbox6_lbl">
';

										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date('Y-m-d', mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);

										$count = "";
										$usercount = array();
										foreach ($symarray as $key => $val) {
											if (!is_array($usercount[$val['change_user']])) {
												$usercount[$val['change_user']] = array();
											}

											if ($val['change_user'] > 0) {

												if ($val['gesamt_zeit_in_minuten'] > 0 && $val['gesamt_zeit_in_minuten'] <= 60) {
													$usercount[$val['change_user']][] = $val['gesamt_zeit_in_minuten'];
												}
											} elseif ($val['create_user'] > 0) {


												if ($val['gesamt_zeit_in_minuten'] > 0 && $val['gesamt_zeit_in_minuten'] <= 60) {
													$usercount[$val['create_user']][] = $val['gesamt_zeit_in_minuten'];
												}
											}
										}

										foreach ($usercount as $userc) {
											$count+=count($userc);
										}
										if ($count > 0) {
											$m_list .= $count;
										}



										$total8+=$count;
										$final8+=$count;
										$m_list .= '

              </label></td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox7"><label id="Gradingfrm_Onechkbox7_lbl">
';

										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date('Y-m-d', mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);

										$count = "";
										$usercount = array();
										foreach ($symarray as $key => $val) {
											if (!is_array($usercount[$val['change_user']])) {
												$usercount[$val['change_user']] = array();
											}

											if ($val['change_user'] > 0) {

												if ($val['gesamt_zeit_in_minuten'] > 60 && $val['gesamt_zeit_in_minuten'] <= 90) {
													$usercount[$val['change_user']][] = $val['gesamt_zeit_in_minuten'];
												}
											} elseif ($val['create_user'] > 0) {


												if ($val['gesamt_zeit_in_minuten'] > 60 && $val['gesamt_zeit_in_minuten'] <= 90) {
													$usercount[$val['create_user']][] = $val['gesamt_zeit_in_minuten'];
												}
											}
										}

										foreach ($usercount as $userc) {
											$count+=count($userc);
										}
										if ($count > 0) {
											$m_list .= $count;
										}



										$total9+=$count;
										$final9+=$count;
										$m_list .= '
              </label></td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox8"><label id="Gradingfrm_Onechkbox8_lbl">
';

										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date('Y-m-d', mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);

										$count = "";
										$usercount = array();
										foreach ($symarray as $key => $val) {
											if (!is_array($usercount[$val['change_user']])) {
												$usercount[$val['change_user']] = array();
											}

											if ($val['change_user'] > 0) {

												if ($val['gesamt_zeit_in_minuten'] > 90) {
													$usercount[$val['change_user']][] = $val['gesamt_zeit_in_minuten'];
												}
											} elseif ($val['create_user'] > 0) {


												if ($val['gesamt_zeit_in_minuten'] > 90) {
													$usercount[$val['create_user']][] = $val['gesamt_zeit_in_minuten'];
												}
											}
										}

										foreach ($usercount as $userc) {
											$count+=count($userc);
										}
										if ($count > 0) {
											$m_list .= $count;
										}



										$total10+=$count;
										$final10+=$count;
										$m_list .= '
              </label></td>
              <td width="34" align="center" id="Gradingfrm_TdOnechkbox9"><label id="Gradingfrm_Onechkbox9_lbl">
';
										$spval = new Sapsymptom();
										$symarray = $spval->getentrycount(date('Y-m-d', mktime(0, 0, 0, $mth, $d, $year)), $this->ipid);
										$count = "";
										$usercount = array();
										foreach ($symarray as $key => $val) {
											if (!is_array($usercount[$val['change_user']])) {
												$usercount[$val['change_user']] = array();
											}

											if ($val['change_user'] > 0) {

												if ($val['gesamt_fahrstrecke_in_km'] >= 31) {
													$usercount[$val['change_user']][] = $val['gesamt_fahrstrecke_in_km'];
												}
											} elseif ($val['create_user'] > 0) {


												if ($val['gesamt_fahrstrecke_in_km'] >= 31) {
													$usercount[$val['create_user']][] = $val['gesamt_fahrstrecke_in_km'];
												}
											}
										}

										foreach ($usercount as $userc) {
											$count+=count($userc);
										}
										if ($count > 0) {
											$m_list .= $count;
										}
										$total11+=$count;
										$final11+=$count;
										$m_list .= '
              </label></td>
            </tr>';
									} else {
										$m_list .= '
<tr id="Gradingfrm_Row3">
    <td width="34" align="left" id="Gradingfrm_head1"><strong>' . $d . '</strong></td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox1"><label id="Gradingfrm_Onechkbox1_lbl"></label></td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox2"><label id="Gradingfrm_Onechkbox2_lbl"></label></td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox3"><label id="Gradingfrm_Onechkbox3_lbl"></label></td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox3"></td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox4"><label id="Gradingfrm_Onechkbox4_lbl"></label></td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox4">&nbsp;</td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox5"><label id="Gradingfrm_Onechkbox5_lbl"></label></td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox6"><label id="Gradingfrm_Onechkbox6_lbl"></label></td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox7"><label id="Gradingfrm_Onechkbox7_lbl"></label></td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox8"><label id="Gradingfrm_Onechkbox8_lbl"></label></td>
    <td width="34" align="center" id="Gradingfrm_TdOnechkbox9"><label id="Gradingfrm_Onechkbox9_lbl"></label></td>
</tr>
                                        ';
									}
								}
								$m_list .= '
            <tr id="Gradingfrm_Row34">
              <td id="Gradingfrm_head32" width="34" align="left"><strong>&Sigma;' . $cnter . ' </strong></td>
              <td id="Gradingfrm_TdThirtyTwochkbox1" width="34" align="center"><input name="hdntotal1" id="hdntotal1" type="hidden" value="' . $total1 . '"  /><label id="totalone">' . $total1 . '</label></td>
              <td id="Gradingfrm_TdThirtyTwochkbox2" width="34" align="center"><input name="hdntotal2" id="hdntotal2" type="hidden" value="' . $total2 . '"  /><label id="totaltwo">' . $total2 . '</label></td>
              <td id="Gradingfrm_TdThirtyTwochkbox3" width="34" align="center"><input name="hdntotal3" id="hdntotal3" type="hidden" value="' . $total3 . '"  /><label id="totalthree">' . $total3 . '</label></td>
              <td id="Gradingfrm_TdThirtyTwochkbox3" width="34" align="center"><input name="hdntotal4" id="hdntotal4" type="hidden"  value="' . $total4 . '" /><label id="totalfour">' . $total4 . '</label></td>
              <td id="Gradingfrm_TdThirtyTwochkbox4" width="34" align="center"><input name="hdntotal5" id="hdntotal5" type="hidden"  value="' . $total5 . '" /><label id="totalfour">' . $total5 . '</label></td>
              <td id="Gradingfrm_TdThirtyTwochkbox4" width="34" align="center"><input name="hdntotal6" id="hdntotal6" type="hidden"  value="' . $total6 . '" /><label id="totalfour">' . $total6 . '</label></td>
              <td id="Gradingfrm_TdThirtyTwochkbox5" width="34" align="center"><input name="hdntotal7" id="hdntotal8" type="hidden"  value="' . $total7 . '" /><label id="total7">' . $total7 . '</label></td>
              <td id="Gradingfrm_TdThirtyTwochkbox6" width="34" align="center"><input name="hdntotal8" id="hdntotal8" type="hidden" value="' . $total8 . '"  /><label id="totalsix">' . $total8 . '</label></td>
              <td id="Gradingfrm_TdThirtyTwochkbox7" width="34" align="center"><input name="hdntotal9" id="hdntotal9" type="hidden" value="' . $total9 . '" /><label id="totalseven">' . $total9 . '</label></td>
              <td id="Gradingfrm_TdThirtyTwochkbox8" width="34" align="center"><input name="hdntotal10" id="hdntotal10" type="hidden" value="' . $total10 . '" /><label id="totaleight">' . $total10 . '</label></td>
              <td id="Gradingfrm_TdThirtyTwochkbox9" width="34" align="center"><input name="hdntotal11" id="hdntotal11" type="hidden" value="' . $total11 . '"  /><label id="totalnine">' . $total11 . '</label></td>
            </tr>';
								if ($mth == date('m')) {
									$m_list .= '
             <tr id="Gradingfrm_NewBox_Row35">
              <td id="Gradingfrm_NewBox_head33" width="34" align="left"><strong>&Sigma; </strong></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox1" width="34" align="center"><input name="hdnbothone" id="hdnbothone" type="hidden" value="' . $final1 . '"  /><label id="bothone">' . $final1 . '</label></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox2" width="34" align="center"><input name="hdnbothtwo" id="hdnbothtwo" type="hidden" value="' . $final2 . '"  /><label id="bothtwo">' . $final2 . '</label></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox3" width="34" align="center"><input name="hdnboththree" id="hdnboththree" type="hidden" value="' . $final3 . '" /><label id="boththree">' . $final3 . '</label></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox3" width="34" align="center"><input name="hdnbothfour" id="hdnbothfour" type="hidden" value="' . $final4 . '" /><label id="bothfour">' . $final4 . '</label></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox4" width="34" align="center"><input name="hdnbothfive" id="hdnbothfour" type="hidden" value="' . $final5 . '" /><label id="bothfour">' . $final5 . '</label></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox4" width="34" align="center"><input name="hdnbothsix" id="hdnbothfour" type="hidden" value="' . $final6 . '" /><label id="bothfour">' . $final6 . '</label></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox5" width="34" align="center"><input name="hdnbothseven" id="hdnbothfive" type="hidden" value="' . $final7 . '"  /><label id="bothfive">' . $final7 . '</label></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox6" width="34" align="center"><input name="hdnbotheight" id="hdnbothsix" type="hidden" value="' . $final8 . '" /><label id="bothsix">' . $final8 . '</label></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox7" width="35" align="center"><input name="hdnbothnine" id="hdnbothseven" type="hidden" value="' . $final9 . '" /><label id="bothseven">' . $final9 . '</label></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox8" width="34" align="center"><input name="hdnbothten" id="hdnbotheight" type="hidden" value="' . $final10 . '" /><label id="botheight">' . $final10 . '</label></td>
              <td id="Gradingfrm_NewBox_TdThirtyThreechkbox9" width="34" align="center"><input name="hdnbotheleven" id="hdnbothnine" type="hidden" value="' . $final11 . '" /><label id="bothnine">' . $final11 . '</label></td>
            </tr>';
								}
								$m_list .= '
          </table>
        </div></td>
        <td>&nbsp;</td>
        ';
								$test[$mth] = $m_list;

								for ($x = 1; $x <= 11; $x++) {
									$var = "total" . $x;
									$sum_fin[$mth] += $$var;
								}
								if ($sum_fin[$mth] > 0 && is_array($test) && is_array($sum_fin)) {
									echo $test[$mth];
								}
								$test['totals'][$mth] = $sum_fin[$mth];
								$m_list = '';
								$sum_fin = '';
							}
							?>
						</tr>
					</table>




					<div class="ClrBoth"></div>
				</div></div>
			<div id="CheckboxGridsTable">
				<div id="Gradingfrm_weitere" class="RelevanteListOuter">
					<div id="Gradingfrm_weitere_head" class="RelevanteList_left_SapvfNew"><strong>Kooperationspartner:</strong></div>
					<div id="Gradingfrm_PflegeheimOuter" class="RelevanteList_left">
						<div id="Gradingfrm_nein" class="RelevanteList_left">
							<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
								<div id="Gradingfrm_nein_content" class="CheckboxGrids_heading_left paddingZero">
									<label id="Gradingfrm_nein_lbl">
										<input id="Gradingfrm_nein_inpt" type="checkbox" name="hospizverein" value="1" class="MarginZero" />
									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">Hospizverein</div>
								<div class="ClrBoth"></div>
							</div>
						</div>
						<div class="ClrBoth"></div>
					</div>
					<div id="Gradingfrm_PflegeheimOuter" class="RelevanteList_left">
						<div id="Gradingfrm_nein" class="RelevanteList_left">
							<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
								<div id="Gradingfrm_nein_content" class="CheckboxGrids_heading_left">
									<label id="Gradingfrm_nein_lbl">
										<input id="Gradingfrm_nein_inpg" type="checkbox" name="arztenetze_agm" value="1" class="MarginZero" />
									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">Ärztenetze/ÄGM</div>
								<div class="ClrBoth"></div>
							</div>
						</div>
						<div class="ClrBoth"></div>
					</div>
					<div id="Gradingfrm_PflegeheimOuter" class="RelevanteList_left">
						<div id="Gradingfrm_nein" class="RelevanteList_left">
							<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
								<div id="Gradingfrm_nein_content" class="CheckboxGrids_heading_left">
									<label id="Gradingfrm_nein_lbl">
										<input id="Gradingfrm_nein_inpg" type="checkbox" name="klinikum" value="1" class="MarginZero" />
									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">Klinikum</div>
								<div class="ClrBoth"></div>
							</div>
						</div>
						<div class="ClrBoth"></div>
					</div>
					<div id="Gradingfrm_PflegeheimOuter" class="RelevanteList_left">
						<div id="Gradingfrm_nein" class="RelevanteList_left">
							<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
								<div id="Gradingfrm_nein_content" class="CheckboxGrids_heading_left">
									<label id="Gradingfrm_nein_lbl">
										<input id="Gradingfrm_nein_inpg" type="checkbox" name="seelsorge" value="1" class="MarginZero" />
									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">Seelsorge</div>
								<div class="ClrBoth"></div>
							</div>
						</div>
						<div class="ClrBoth"></div>
					</div>
					<div id="Gradingfrm_PflegeheimOuter" class="RelevanteList_left">
						<div id="Gradingfrm_nein" class="RelevanteList_left">
							<div id="Gradingfrm_nein_head" class="CheckboxGrids_heading">
								<div id="Gradingfrm_nein_content" class="CheckboxGrids_heading_left">
									<label id="Gradingfrm_nein_lbl">
										<input id="Gradingfrm_nein_inpg" type="checkbox" name="pflegedienst" value="1" class="MarginZero" />
									</label>
								</div>
								<div id="Gradingfrm_nein_heading" class="CheckboxGrids_heading_left">Pflegedienst</div>
								<div class="ClrBoth"></div>
							</div>
						</div>
						<div class="ClrBoth"></div>
					</div>
					<div class="ClrBoth"></div>
				</div>
				<div id="Partners">
					<p>Hiermit bestätige ich die Richtigkeit der Angaben auf<br />
						dem Leistungsnachweis! </p>
				</div>
				<div id="Gradingfrm_Prtern_outer" class="DatPlceforPrternOuter">
					<div id="Gradingfrm_Prtern_blanl" class="DatPlceforPrternblank">&nbsp;</div>
					<div id="Gradingfrm_Prtern_content" class="DatPlceforPrternContent">
						<div id="Gradingfrm_Prtern_list" class="DatPlceforPrtern">
							<label id="Gradingfrm_Prtern_chkbox">
							</label>
						</div>
						Ort, Datum </div>
					<div class="ClrBoth"></div>
				</div>
				<div class="ClrBoth"></div>
				<input name="submit" type="submit" value="<?php echo $this->translate('generatepdf') ?>" />
			</div>

		</div>
	</div>
</form>