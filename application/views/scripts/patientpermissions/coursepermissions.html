<script type="text/javascript">

	function checkedall(allid)
	{
	  	
		hdn = document.getElementsByName('hiddmodid[]');
		if(allid.name=='can_add[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canadd['+hdn[i].value+']'))
					{
						document.getElementsByName('canadd['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canadd['+hdn[i].value+']'))
					{
						document.getElementsByName('canadd['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
		
		if(allid.name=='can_edit[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canedit['+hdn[i].value+']'))
					{
						document.getElementsByName('canedit['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canedit['+hdn[i].value+']'))
					{
						document.getElementsByName('canedit['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
		if(allid.name=='can_delete[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('candelete['+hdn[i].value+']'))
					{
						document.getElementsByName('candelete['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('candelete['+hdn[i].value+']'))
					{
						document.getElementsByName('candelete['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
		if(allid.name=='can_view[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canview['+hdn[i].value+']'))
					{
						document.getElementsByName('canview['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canview['+hdn[i].value+']'))
					{
						document.getElementsByName('canview['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
	}

</script>
<br />
<form action="" method="post" name="frmcourse" id="frmcourse" >
	<div id="user_group_error" class="err"><? echo $this->error_message ?></div>
	<table width="30%">
		<tr >
			<td colspan="2" valign="top">&nbsp;</td>
		</tr> 
		<tr>
			<?php if($_REQUEST['user_id']) :?>
			<td valign="top"><b><? echo $this->translate('user')?> :</b></td>
			<td valign="top"><? echo $this->username ?></td>	
			<? else :?>
			<td valign="top"><b><? echo $this->translate('Gruppe')?> :</b></td>
			<td valign="top"><? echo $this->groupname ?></td>	
			<? endif;?>
		</tr>
	</table>
	<div class="grid">
		<table class="datatable" border="0">		
			<tr>
				<th>ID</th>
				<th>Course Shortcut</th>
				<th>Course Name</th>
				<th><input name="can_view[]" type="checkbox" onclick="checkedall(this)" value="" />&nbsp;<? echo $this->translate("canview"); ?></th>
				<th><input name="can_edit[]" type="checkbox" onclick="checkedall(this)" value="" />&nbsp;<? echo $this->translate("canedit"); ?></th>
			</tr>
			<?php echo $this->coursegrid; ?>
			<tr>
				<td colspan="4" valign="top">
					<a class="button"  href="patientnew/patientdetails?id=<?php echo $_REQUEST['id']; ?>" style="padding: 0;"><?php echo $this->translate('backtolist') ?></a>
				<input name="submit" id="submit" type="submit" class="button" value="<? echo $this->translate('submit')?>" />
				</td>
			</tr>
		</table>
</form>