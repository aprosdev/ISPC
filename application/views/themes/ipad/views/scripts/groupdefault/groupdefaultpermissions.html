<script type="text/javascript">

	 function checkedall(allid)
	  {
	  	
		hdn = document.getElementsByName('hdnmoduleid[]');
		if(allid.name=='can_add[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canadd['+hdn[i].value+']'))
					{
						document.getElementsByName('canadd['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canadd['+hdn[i].value+']'))
					{
						document.getElementsByName('canadd['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
		
		if(allid.name=='can_edit[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canedit['+hdn[i].value+']'))
					{
						document.getElementsByName('canedit['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canedit['+hdn[i].value+']'))
					{
						document.getElementsByName('canedit['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
		if(allid.name=='can_delete[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('candelete['+hdn[i].value+']'))
					{
						document.getElementsByName('candelete['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('candelete['+hdn[i].value+']'))
					{
						document.getElementsByName('candelete['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
		if(allid.name=='can_view[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canview['+hdn[i].value+']'))
					{
						document.getElementsByName('canview['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canview['+hdn[i].value+']'))
					{
						document.getElementsByName('canview['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
	  }

</script>
<form action="" method="post" name="frmuser" id="frmuser" >
<div id="user_group_error" class="err"><? echo $this->error_message ?></div>

<table width="30%">
	<tr>
	    <td colspan="2" valign="top">&nbsp;</td>
	</tr> 
	<tr>
		<td valign="top"><b><? echo $this->translate('groupname')?> :</b></td>
		<td valign="top"><? echo $this->groupname ?></td>
	</tr>
</table>

<div class="grid">

<table class="datatable" border="0">
  <tr>
    <th>ID</td>
    <th><? echo $this->translate('modulename')?></th>
    <th><input name="can_view[]" type="checkbox" onclick="checkedall(this)" value="" />&nbsp;<? echo $this->translate("canview"); ?></th>
    <th><input name="can_edit[]" type="checkbox" onclick="checkedall(this)" value="" />&nbsp;<? echo $this->translate("canedit"); ?></th>
  </tr>
  
  <? $count=1;
   	foreach($this->permisions as $key=>$val){ 
		$prearray  = $this->navarray;
   ?>
	<tr class="row" >	
		<td valign="top"><?=$count ?></td>
		<td valign="top"><?=$val['menu_title'] ?><input type="hidden" name="hdnmoduleid[]" id="hdnmoduleid" value="<?=$val['id'] ?>"  /></td>
		<td valign="top"><input name="canview[<?=$val['id'] ?>]" type="checkbox" value="1" <? if($prearray[$val['id']]['canview']=='1'){ echo 'checked="checked"';}?> /></td>
		<td valign="top"><input name="canedit[<?=$val['id'] ?>]" type="checkbox" value="1" <? if($prearray[$val['id']]['canedit']=='1'){ echo 'checked="checked"';}?> /></td>
	</tr>
  <? $count++; } ?>
  <tr>
    <td colspan="6" valign="top"><button type="submit" name="button" id="button"><? echo $this->translate('submit')?></button></td>
  </tr>
  
</table>
</form>