<script type="text/javascript">

	function checkedall(allid)
	{

		hdn = document.getElementsByName('hdnmoduleid[]');
		if(allid.name=='can_add[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canadd['+hdn[i].value+']'))
					{
						document.getElementsByName('canadd['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canadd['+hdn[i].value+']'))
					{
						document.getElementsByName('canadd['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}

		if(allid.name=='can_edit[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canedit['+hdn[i].value+']'))
					{
						document.getElementsByName('canedit['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canedit['+hdn[i].value+']'))
					{
						document.getElementsByName('canedit['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
		if(allid.name=='can_delete[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('candelete['+hdn[i].value+']'))
					{
						document.getElementsByName('candelete['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('candelete['+hdn[i].value+']'))
					{
						document.getElementsByName('candelete['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
		if(allid.name=='can_view[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canview['+hdn[i].value+']'))
					{
						document.getElementsByName('canview['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('canview['+hdn[i].value+']'))
					{
						document.getElementsByName('canview['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
	}
	function checkedall_m(allid)
	{

		hdn = document.getElementsByName('m_hdnmoduleid[]');
		if(allid.name=='m_can_add[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('m_canadd['+hdn[i].value+']'))
					{
						document.getElementsByName('m_canadd['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('m_canadd['+hdn[i].value+']'))
					{
						document.getElementsByName('m_canadd['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}

		if(allid.name=='m_can_edit[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('m_canedit['+hdn[i].value+']'))
					{
						document.getElementsByName('m_canedit['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('m_canedit['+hdn[i].value+']'))
					{
						document.getElementsByName('m_canedit['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
		if(allid.name=='m_can_delete[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('m_candelete['+hdn[i].value+']'))
					{
						document.getElementsByName('m_candelete['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('m_candelete['+hdn[i].value+']'))
					{
						document.getElementsByName('m_candelete['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
		if(allid.name=='m_can_view[]')
		{
			if(allid.checked==true)
			{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('m_canview['+hdn[i].value+']'))
					{
						document.getElementsByName('m_canview['+hdn[i].value+']')[0].checked = true;
					}
				}
			}else{
				for(i=0; i<hdn.length;i++)
				{
					if(document.getElementsByName('m_canview['+hdn[i].value+']'))
					{
						document.getElementsByName('m_canview['+hdn[i].value+']')[0].checked = false;
					}
				}
			}
		}
	}

</script>
<form action="" method="post" name="frmuser" id="frmuser" >
	<div id="user_group_error" class="err"><? echo $this->error_message ?></div>
	<table width="60%">
		<tr>
			<td colspan="6" valign="top">&nbsp;</td>
		</tr>
		<tr>
			<td valign="top">&nbsp;</td>
			<td valign="top"><b><? echo $this->translate('groupname') ?> :</b></td>
			<td valign="top"><? echo $this->groupname ?></td>
			<td valign="top"><b><? echo $this->translate('clientname') ?> :</b><input type="hidden" name="hdnclientid" id="hdnclientid" value="<? echo $this->theclientid ?>" /></td>
			<td valign="top"><? echo $this->client_name ?>&nbsp;</td>
			<td valign="top">&nbsp;</td>
		</tr>

	</table>
	<div class="grid">
		<table class="datatable" border="0">
			<tr>
				<th>ID</td>
				<? if ($_REQUEST['parent'] == "show"):?><th><? echo $this->translate('parentmenu') ?></th><? endif;?>
				<th><? echo $this->translate('modulename') ?></th>
				<th><input name="can_view[]" type="checkbox" onclick="checkedall(this)" value="" />&nbsp;<? echo $this->translate("canview"); ?></th>
				<th><input name="can_edit[]" type="checkbox" onclick="checkedall(this)" value="" />&nbsp;<? echo $this->translate("canedit"); ?></th>
			</tr>
			
			<?php $count = 1; ?>
			<?php  foreach($this->master_menus as $mid=>$mvalue):
			?>
			<?php   $prearray = $this->navarray; ?> 
			<tr class="row">
					<td valign="top"><?php echo  $count ?></td>
					<td valign="top"><?php echo  $mvalue['menu_title'] ?>
						<input type="hidden" name="hdnmoduleid[]" id="hdnmoduleid" value="<?php echo  $mvalue['id'] ?>"  />
					</td>

					<td valign="top">
						<input name="canview[<?php echo  $mvalue['id'] ?>]" type="checkbox" value="1" <? if ($prearray[$mvalue['id']]['canview'] == '1') { echo 'checked="checked"'; } ?> />
					</td>

					<td valign="top">
						<input name="canedit[<?php echo  $mvalue['id'] ?>]" type="checkbox" value="1" <? if ($prearray[$mvalue['id']]['canedit'] == '1') { echo 'checked="checked"'; } ?> />
					</td>
				</tr>
			
				<?php foreach($this->submenus[$mvalue['id']] as $sid=>$svalue): ?>
					<tr class="row">
							<td valign="top"><?php echo  $count ?></td>
							<td valign="top"> &nbsp; &nbsp; &nbsp; &nbsp;<?php echo  $svalue['menu_title'] ?>
								<input type="hidden" name="hdnmoduleid[]" id="hdnmoduleid" value="<?php echo  $svalue['id'] ?>"  />
							</td>
		
							<td valign="top">
								<input name="canview[<?php echo  $svalue['id'] ?>]" type="checkbox" value="1" <? if ($prearray[$svalue['id']]['canview'] == '1') { echo 'checked="checked"'; } ?> />
							</td>
		
							<td valign="top">
								<input name="canedit[<?php echo  $svalue['id'] ?>]" type="checkbox" value="1" <? if ($prearray[$svalue['id']]['canedit'] == '1') { echo 'checked="checked"'; } ?> />
							</td>
						</tr>
				<?php foreach($this->submenus[$svalue['id']] as $ssid=>$ssvalue): 
				?>
					<tr class="row">
							<td valign="top"><?php echo  $count ?></td>
							<td valign="top"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<?php echo  $ssvalue['menu_title'] ?>
								<input type="hidden" name="hdnmoduleid[]" id="hdnmoduleid" value="<?php echo  $ssvalue['id'] ?>"  />
							</td>
		
							<td valign="top">
								<input name="canview[<?php echo  $ssvalue['id'] ?>]" type="checkbox" value="1" <? if ($prearray[$ssvalue['id']]['canview'] == '1') { echo 'checked="checked"'; } ?> />
							</td>
		
							<td valign="top">
								<input name="canedit[<?php echo  $ssvalue['id'] ?>]" type="checkbox" value="1" <? if ($prearray[$ssvalue['id']]['canedit'] == '1') { echo 'checked="checked"'; } ?> />
							</td>
						</tr>
			<? $count++;?>
			<? endforeach; ?>
			<? endforeach; ?>
			<? $count++;?>
			<? endforeach; ?>
			
 	
			
			<tr>
				<td colspan="6" valign="top" align="left">
					<input name="submit" id="submit" type="submit" class="button" value="<? echo $this->translate('submit') ?> Patientenmenu" />
				</td>
			</tr>
		</table>
	</div>

</form>












<form action="" method="post" name="frmuser" id="frmuser" >
	<div class="grid">

		<table class="datatable" border="0">

			<tr>
				<th>#</td>
				<th><? echo $this->translate('modulename') ?></th>
				<th><input name="m_can_view[]" type="checkbox" onclick="checkedall_m(this)" value="" />&nbsp;<? echo $this->translate("canview"); ?></th>
				<th><input name="m_can_edit[]" type="checkbox" onclick="checkedall_m(this)" value="" />&nbsp;<? echo $this->translate("canedit"); ?></th>
			</tr>
			<?
			$count = 1;
			foreach ($this->misc_modules as $key => $val)
			{
				$misc_perms = $this->misc_perms;
				?>
				<tr class="row">
					<td valign="top"><?= $count ?> <input type="hidden" value="1" id="misc_modules" name="misc_modules" /> </td>

					<td valign="top"><?= $this->translate($val['module']) ?>
						<input type="hidden" name="m_hdnmoduleid[]" id="hdnmoduleid" value="<?= $val['id'] ?>"  />
					</td>

					<td valign="top">
						<input name="m_canview[<?= $val['id'] ?>]" type="checkbox" value="1" <? if ($misc_perms[$val['id']]['canview'] == '1') { echo 'checked="checked"'; } ?> />
					</td>

					<td valign="top">
						<input name="m_canedit[<?= $val['id'] ?>]" type="checkbox" value="1" <? if ($misc_perms[$val['id']]['canedit'] == '1') { echo 'checked="checked"'; } ?> />
					</td>
				</tr>
			<? $count++; } ?>			<tr>
				<td colspan="6" valign="top" align="left">
					<a class="button"  href="groupdefault/clientgroupmasterlist" style="padding: 0;"><?php echo $this->translate('backtolist') ?></a>
					<input name="submit" id="submit" type="submit" class="button" value="<? echo $this->translate('submit') ?> Misc"/>
				</td>
			</tr>
		</table>
	</div>
</form>